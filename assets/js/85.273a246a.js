(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{748:function(a,s,t){"use strict";t.r(s);var n=t(4),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("blockquote",[t("p",[a._v("ConfigMap 允许您将配置文件与镜像文件分离，以使容器化的应用程序具有可移植性。")])]),a._v(" "),t("p",[a._v("ConfigMap存在的主要意义是在容器中生成一系列环境变量而达到对容器进行配置的目的。")]),a._v(" "),t("p",[a._v("由于是生成环境变量，所以ConfigMap的输入"),t("strong",[a._v("以键值对为固定格式")]),a._v("，后缀名一般为"),t("code",[a._v(".properties")]),a._v("。就像这样：")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("enemies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("aliens")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("lives")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("3")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("enemies.cheat")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("enemies.cheat.level")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("noGoodRotten")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("secret.code.passphrase")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("UUDDLRLRBABAS")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("secret.code.allowed")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("secret.code.lives")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("30")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h2",{attrs:{id:"configmap的查看"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configmap的查看"}},[a._v("#")]),a._v(" ConfigMap的查看")]),a._v(" "),t("p",[a._v("以yaml格式输出ConfigMap")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl get configmaps "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("map-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" -o yaml\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"configmap的创建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configmap的创建"}},[a._v("#")]),a._v(" ConfigMap的创建")]),a._v(" "),t("h3",{attrs:{id:"用指令创建configmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用指令创建configmap"}},[a._v("#")]),a._v(" 用指令创建ConfigMap")]),a._v(" "),t("blockquote",[t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl create configmap "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("map-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("data-source"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("其中， "),t("code",[a._v("<map-name>")]),a._v(" 是要分配给 ConfigMap 的名称，"),t("code",[a._v("<data-source>")]),a._v(" 是要从中提取数据的目录，文件或者文字值。")]),a._v(" "),t("p",[a._v("数据源对应于 ConfigMap 中的 key-value (键值对)")]),a._v(" "),t("ul",[t("li",[a._v("key = 您在命令行上提供的文件名或者密钥")]),a._v(" "),t("li",[a._v("value = 您在命令行上提供的文件内容或者文字值")])])]),a._v(" "),t("h4",{attrs:{id:"直接在命令行指定configmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#直接在命令行指定configmap"}},[a._v("#")]),a._v(" 直接在命令行指定ConfigMap")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl create configmap special-config --from-literal"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("special.how"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("very --from-literal"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("special.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("charm\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("这个指令会生成：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl get configmaps special-config -o yaml\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("creationTimestamp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token datetime number"}},[a._v("2016-02-18T19:14:38Z")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("resourceVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"651"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("selfLink")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" /api/v1/namespaces/default/configmaps/special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("uid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" dadce046"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("d673"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("11e5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("8cd0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("68f728db1985\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("special.how")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" very\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("special.type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" charm\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("h4",{attrs:{id:"从文件创建configmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从文件创建configmap"}},[a._v("#")]),a._v(" 从文件创建ConfigMap")]),a._v(" "),t("p",[a._v("比如将开头那个配置文件保存为"),t("code",[a._v("game.properties")]),a._v("，那么我就可以从文件创建一个ConfigMap，例如命名为"),t("code",[a._v("game-config")]),a._v("：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl create configmap game-config --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./game.properties\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h4",{attrs:{id:"从文件夹创建configmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从文件夹创建configmap"}},[a._v("#")]),a._v(" 从文件夹创建ConfigMap")]),a._v(" "),t("p",[a._v("比如我又有一个"),t("code",[a._v("ui.properties")]),a._v("的配置文件，我想将它与"),t("code",[a._v("game.properties")]),a._v("一起创建配置，那就可以把他们一起放在某个目录下，比如"),t("code",[a._v("./conf")]),a._v("，然后从文件夹创建ConfigMap：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl create configmap game-config --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./conf\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("上面的指令等效于：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl create configmap game-config --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./conf/game.properties --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./conf/ui.properties\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("它们都生成如下ConfigMap：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl get configmaps game-config -o yaml\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("creationTimestamp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token datetime number"}},[a._v("2016-02-18T18:52:05Z")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" game"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("resourceVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"516"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("selfLink")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" /api/v1/namespaces/default/configmaps/game"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("uid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" b4952dc3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("d670"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("11e5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("8cd0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("68f728db1985\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("game.properties")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[a._v("\n    enemies=aliens\n    lives=3\n    enemies.cheat=true\n    enemies.cheat.level=noGoodRotten\n    secret.code.passphrase=UUDDLRLRBABAS\n    secret.code.allowed=true\n    secret.code.lives=30")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ui.properties")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[a._v("\n    color.good=purple\n    color.bad=yellow\n    allow.textmode=true\n    how.nice.to.look=fairlyNice")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#注意上面game.properties和ui.properties后面的这个竖线“|”表面后面是一个字符串，不要把他当成键值对")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br")])]),t("p",[a._v("可以看到"),t("code",[a._v("game.properties")]),a._v("和"),t("code",[a._v("ui.properties")]),a._v("一起生成了ConfigMap。")]),a._v(" "),t("h4",{attrs:{id:"指定configmap-data中的key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定configmap-data中的key"}},[a._v("#")]),a._v(" 指定ConfigMap "),t("code",[a._v("data")]),a._v("中的key")]),a._v(" "),t("p",[a._v("当然，最终生成的"),t("code",[a._v("data")]),a._v("中配置文件的key是可以改变的：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl create configmap game-config-1 --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("game-special-key"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./conf/game.properties\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("它会生成如下ConfigMap：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl get configmaps game-config-1 -o yaml\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("creationTimestamp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token datetime number"}},[a._v("2016-02-18T18:54:22Z")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" game"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("resourceVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"530"')]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("selfLink")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" /api/v1/namespaces/default/configmaps/game"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("uid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 05f8da22"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("d671"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("11e5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("8cd0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("68f728db1985\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("game-special-key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[a._v("\n    enemies=aliens\n    lives=3\n    enemies.cheat=true\n    enemies.cheat.level=noGoodRotten\n    secret.code.passphrase=UUDDLRLRBABAS\n    secret.code.allowed=true\n    secret.code.lives=30")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br")])]),t("h3",{attrs:{id:"configmapgenerator"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configmapgenerator"}},[a._v("#")]),a._v(" "),t("code",[a._v("configMapGenerator")])]),a._v(" "),t("p",[t("code",[a._v("configMapGenerator")]),a._v("是一种固定格式的yaml文件，代替指令生成ConfigMap。")]),a._v(" "),t("p",[a._v("使用"),t("code",[a._v("configMapGenerator")]),a._v("文件生成 ConfigMap 对象的指令是：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl apply -k "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("yaml文件或目录"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("如果使用目录，则目录下的每个"),t("code",[a._v("configMapGenerator")]),a._v("文件都生成一个 ConfigMap。")]),a._v(" "),t("h4",{attrs:{id:"直接在configmapgenerator指定configmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#直接在configmapgenerator指定configmap"}},[a._v("#")]),a._v(" 直接在"),t("code",[a._v("configMapGenerator")]),a._v("指定ConfigMap")]),a._v(" "),t("p",[a._v("使用这个文件生成ConfigMap：")]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("configMapGenerator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("literals")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" special.how=very\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" special.type=charm\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("等效于：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl create configmap special-config --from-literal"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("special.how"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("very --from-literal"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("special.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("charm\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h4",{attrs:{id:"configmapgenerator从文件创建configmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configmapgenerator从文件创建configmap"}},[a._v("#")]),a._v(" "),t("code",[a._v("configMapGenerator")]),a._v("从文件创建ConfigMap")]),a._v(" "),t("p",[a._v("使用这个文件生成ConfigMap：")]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("configMapGenerator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" game"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("files")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" ./game.properties\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("等效于：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl create configmap game-config --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./game.properties\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h4",{attrs:{id:"指定configmap-data中的key-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定configmap-data中的key-2"}},[a._v("#")]),a._v(" 指定ConfigMap "),t("code",[a._v("data")]),a._v("中的key")]),a._v(" "),t("p",[a._v("使用这个文件生成ConfigMap：")]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("configMapGenerator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" game"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("files")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" game"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("key=./conf/game.properties\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("等效于：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("kubectl create configmap game-config-1 --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("game-special-key"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./conf/game.properties\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"用标准方式生成configmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用标准方式生成configmap"}},[a._v("#")]),a._v(" 用标准方式生成ConfigMap")]),a._v(" "),t("p",[a._v("标准方式就是"),t("RouterLink",{attrs:{to:"/Kubernetes/Kubernetes对象/Kubernetes对象.html"}},[a._v("《Kubernetes(k8s)对象》")]),a._v("里面介绍的方式：")],1),a._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" <指定ConfigMap名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" <指定ConfigMap作用的namespace"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  <ConfigMap数据"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("p",[a._v("例如：")]),a._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("special.how")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" very\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("special.type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" charm\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("h2",{attrs:{id:"configmap的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configmap的使用"}},[a._v("#")]),a._v(" ConfigMap的使用")]),a._v(" "),t("h3",{attrs:{id:"使用-configmap-生成环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-configmap-生成环境变量"}},[a._v("#")]),a._v(" 使用 ConfigMap 生成环境变量")]),a._v(" "),t("p",[a._v("以两个ConfigMap为例：")]),a._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("special.how")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" very\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("---")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("log_level")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" INFO\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br")])]),t("h4",{attrs:{id:"用-configmap-中的value值定义容器环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用-configmap-中的value值定义容器环境变量"}},[a._v("#")]),a._v(" 用 ConfigMap 中的value值定义容器环境变量")]),a._v(" "),t("p",[a._v("比如，若要令容器中的环境变量"),t("code",[a._v("$SPECIAL_LEVEL_KEY")]),a._v("值为"),t("code",[a._v("special-config")]),a._v("中的"),t("code",[a._v("special.how")]),a._v("定义值，并令"),t("code",[a._v("$LOG_LEVEL")]),a._v("值为"),t("code",[a._v("env-config")]),a._v("中的"),t("code",[a._v("log_level")]),a._v("定义值，那么应该：")]),a._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" dapi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("container\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" k8s.gcr.io/busybox\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" SPECIAL_LEVEL_KEY "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定环境变量的键")]),a._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("valueFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定其值从何而来")]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("configMapKeyRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定其值来源于ConfigMap")]),a._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定其值来源于ConfigMap中的special-config")]),a._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special.how "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定其值来源于ConfigMap中的special-config中的special.how")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" LOG_LEVEL "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定环境变量的键")]),a._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("valueFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定其值从何而来")]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("configMapKeyRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定其值来源于ConfigMap")]),a._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定其值来源于ConfigMap中的env-config")]),a._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" log_level "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定其值来源于ConfigMap中的env-config中的log_level")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("...")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("...")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("...")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br")])]),t("h4",{attrs:{id:"用-configmap-定义容器环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用-configmap-定义容器环境变量"}},[a._v("#")]),a._v(" 用 ConfigMap 定义容器环境变量")]),a._v(" "),t("p",[a._v("K8s当然也可以一次性将ConfigMap中的所有数据导入为容器的环境变量。比如，上面的Pod等同于：")]),a._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("SPECIAL_LEVEL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" very\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("SPECIAL_TYPE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" charm\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("---")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" dapi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("container\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" k8s.gcr.io/busybox\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("envFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("configMapRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("...")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("...")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("...")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br")])]),t("h3",{attrs:{id:"使用存储在-configmap-中的数据填充数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用存储在-configmap-中的数据填充数据卷"}},[a._v("#")]),a._v(" 使用存储在 ConfigMap 中的数据填充数据卷")]),a._v(" "),t("h4",{attrs:{id:"直接用-configmap-填充数据卷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#直接用-configmap-填充数据卷"}},[a._v("#")]),a._v(" 直接用 ConfigMap 填充数据卷")]),a._v(" "),t("p",[a._v("将ConfigMap用"),t("code",[a._v("volumes")]),a._v("挂载到容器里面即是使用 ConfigMap 中的数据填充数据卷。在被填充的数据卷中，"),t("code",[a._v("ConfigMap")]),a._v("中所定义的"),t("code",[a._v("data")]),a._v("字段下的每一个键都会生成一个文件，文件内容即其值。")]),a._v(" "),t("p",[a._v("以这个ConfigMap为例：")]),a._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("game.properties")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[a._v("\n    enemies=aliens\n    lives=3\n    enemies.cheat=true\n    enemies.cheat.level=noGoodRotten\n    secret.code.passphrase=UUDDLRLRBABAS\n    secret.code.allowed=true\n    secret.code.lives=30")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ui.properties")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[a._v("\n    color.good=purple\n    color.bad=yellow\n    allow.textmode=true\n    how.nice.to.look=fairlyNice")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br")])]),t("p",[a._v("K8S可以使用ConfigMap填充数据卷：")]),a._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" dapi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("container\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" k8s.gcr.io/busybox\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("volume\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" /etc/config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("volume\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("configMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定填充所用的configMap")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定填充所用的configMap名称")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br")])]),t("p",[a._v("在这个容器中可以看到被填充的数据卷里面有两个文件，其内容为其在ConfigMap中的值：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" /etc/config/\ngame.properties\nui.properties\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/config/game.properties\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("enemies")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("aliens\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("lives")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\nenemies.cheat"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\nenemies.cheat.level"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("noGoodRotten\nsecret.code.passphrase"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("UUDDLRLRBABAS\nsecret.code.allowed"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\nsecret.code.lives"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/config/ui.properties\ncolor.good"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("purple\ncolor.bad"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("yellow\nallow.textmode"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\nhow.nice.to.look"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("fairlyNice\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br")])]),t("h4",{attrs:{id:"用-configmap-填充数据卷的指定路径"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用-configmap-填充数据卷的指定路径"}},[a._v("#")]),a._v(" 用 ConfigMap 填充数据卷的指定路径")]),a._v(" "),t("p",[a._v("还是上面那个例子。我想把"),t("code",[a._v("game.properties")]),a._v("填充到"),t("code",[a._v("game")]),a._v("文件里面，而把"),t("code",[a._v("ui.properties")]),a._v("填充到"),t("code",[a._v("ui")]),a._v("文件里面：")]),a._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" dapi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("container\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" k8s.gcr.io/busybox\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("volume\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" /etc/config\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("volume\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("configMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定填充所用的configMap")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" special"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("config "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#指定填充所用的configMap名称")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("items")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" game.properties\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" game\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ui.properties\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ui\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br")])]),t("p",[a._v("在这个容器中可以看到被填充的数据卷里面的两个文件的文件名和上面不一样了：")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" /etc/config/\ngame\nui\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/config/game\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("enemies")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("aliens\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("lives")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\nenemies.cheat"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\nenemies.cheat.level"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("noGoodRotten\nsecret.code.passphrase"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("UUDDLRLRBABAS\nsecret.code.allowed"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\nsecret.code.lives"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/config/ui\ncolor.good"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("purple\ncolor.bad"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("yellow\nallow.textmode"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true\nhow.nice.to.look"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("fairlyNice\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);