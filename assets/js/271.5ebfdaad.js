(window.webpackJsonp=window.webpackJsonp||[]).push([[271],{948:function(s,t,a){"use strict";a.r(t);var e=a(4),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("a",{attrs:{href:"https://blog.csdn.net/m0_61544080/article/details/121621524",target:"_blank",rel:"noopener noreferrer"}},[s._v("åŸæ–‡åœ¨æ­¤"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/22b7e25948d3e023af5ffb805d0d429c.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/483ab9391d2dcdf16fd9b06490f29e41.png",alt:""}})]),s._v(" "),a("h1",{attrs:{id:"è¿™ç¯‡æ–‡ç« æ‰“ç®—è®²ä»€ä¹ˆï¼Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¿™ç¯‡æ–‡ç« æ‰“ç®—è®²ä»€ä¹ˆï¼Ÿ"}},[s._v("#")]),s._v(" è¿™ç¯‡æ–‡ç« æ‰“ç®—è®²ä»€ä¹ˆï¼Ÿ")]),s._v(" "),a("p",[s._v("äº†è§£ WebAssembly çš„å‰ä¸–ä»Šç”Ÿï¼Œè¿™ä¸€è‡´åŠ›äºè®© Web æ›´å¹¿æ³›ä½¿ç”¨çš„ä¼Ÿå¤§åˆ›é€ æ˜¯å¦‚ä½•åœ¨æ•´ä¸ª Web/Node.js\nçš„ç”Ÿå‘½å‘¨æœŸèµ·ä½œç”¨çš„ï¼Œæ¢è®¨ä¸ºä»€ä¹ˆ WASM æ˜¯ Web çš„æœªæ¥ï¼Ÿ")]),s._v(" "),a("p",[s._v("åœ¨æ•´ç¯‡æ–‡ç« çš„è®²è§£è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥äº†è§£åˆ° WebAssembly åŸç”Ÿã€AssemblyScriptã€Emscripten ç¼–è¯‘å™¨ã€‚")]),s._v(" "),a("p",[s._v("æœ€åè¿˜å¯¹ WebAssembly çš„æœªæ¥è¿›è¡Œäº†å±•æœ›ï¼Œåˆ—ä¸¾äº†ä¸€äº›ä»¤äººå…´å¥‹çš„æŠ€æœ¯çš„å‘å±•æ–¹å‘ã€‚")]),s._v(" "),a("p",[s._v("æˆ‘åœ¨ä¹‹å‰ä¹Ÿæ’°å†™è¿‡æ·±å…¥äº†è§£ WebAssembly ä½¿ç”¨ç»†èŠ‚å’Œåœ¨æµè§ˆå™¨é‡Œé¢è°ƒè¯• WebAssembly ä»£ç çš„æ–‡ç« ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç‚¹å‡»é“¾æ¥é˜…è¯»ï¼š")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzkxMjI3OTA3NQ==&mid=2247485531&idx=1&sn=981604a9da572ce6f06051664cf41dc6&chksm=c10e1b17f67992010f019675a66aae5965a6d51b29336dfd90164e800c056f8fe7c7548cb1ac&token=1261539433&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"}},[s._v("WebAssemblyåœ¨æµè§ˆå™¨ä¸­è°ƒè¯•"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzkxMjI3OTA3NQ==&mid=2247485073&idx=1&sn=3515cf79aecd1024aa2ceb3142ec04b5&chksm=c10e15ddf6799ccbfb981e3f92cafc1a95668af8cba54aba264536b8cbad4c9158d616e9e7ab&token=1261539433&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"}},[s._v("ç¼–è¯‘C/C++ ç¨‹åºåˆ°WebAssemblyï¼Œç„¶åè¿è¡Œåœ¨æµè§ˆå™¨å’Œ Node.js"),a("OutboundLink")],1)])]),s._v(" "),a("h1",{attrs:{id:"ä¸ºä»€ä¹ˆéœ€è¦-webassembly"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆéœ€è¦-webassembly"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆéœ€è¦ WebAssembly?")]),s._v(" "),a("h2",{attrs:{id:"åŠ¨æ€è¯­è¨€ä¹‹è¸µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŠ¨æ€è¯­è¨€ä¹‹è¸µ"}},[s._v("#")]),s._v(" åŠ¨æ€è¯­è¨€ä¹‹è¸µ")]),s._v(" "),a("p",[s._v("é¦–å…ˆå…ˆæ¥çœ‹ä¸€ä¸‹ JS ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/4fac0b340a3031ba690169b052b00968.png",alt:""}})]),s._v(" "),a("p",[s._v(">ä¸Šè¿°æ˜¯ Microsoft Edge ä¹‹å‰çš„ ChakraCore å¼•æ“ç»“æ„ï¼Œç›®å‰ Microsoft Edge çš„ JS å¼•æ“å·²ç»åˆ‡æ¢ä¸º V8ã€‚")]),s._v(" "),a("p",[s._v("æ•´ä½“çš„æµç¨‹å°±æ˜¯ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("æ‹¿åˆ°äº† JS æºä»£ç ï¼Œäº¤ç»™ Parserï¼Œç”Ÿæˆ AST")]),s._v(" "),a("li",[s._v("ByteCode Compiler å°† AST ç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼ˆByteCodeï¼‰")]),s._v(" "),a("li",[s._v("ByteCode è¿›å…¥ç¿»è¯‘å™¨ï¼Œç¿»è¯‘å™¨å°†å­—èŠ‚ç ä¸€è¡Œä¸€è¡Œç¿»è¯‘ï¼ˆInterpreterï¼‰ä¸ºæœºå™¨ç ï¼ˆMachine Codeï¼‰ï¼Œç„¶åæ‰§è¡Œ")])]),s._v(" "),a("p",[s._v("ä½†å…¶å®æˆ‘ä»¬å¹³æ—¶å†™çš„ä»£ç æœ‰å¾ˆå¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œå¦‚å¤šæ¬¡æ‰§è¡ŒåŒä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥å°†è¿™ä¸ªå‡½æ•°ç”Ÿæˆçš„ Machine Code æ ‡è®°å¯ä¼˜åŒ–ï¼Œç„¶åæ‰“åŒ…é€åˆ° JIT\nCompilerï¼ˆJust-In-Timeï¼‰ï¼Œä¸‹æ¬¡å†æ‰§è¡Œè¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦ç»è¿‡ Parser-Compiler-Interpreter è¿™ä¸ªè¿‡ç¨‹ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œè¿™ä»½å‡†å¤‡å¥½çš„ Machine Codeï¼Œå¤§å¤§æé«˜çš„ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚")]),s._v(" "),a("p",[s._v("ä½†æ˜¯ä¸Šè¿°çš„ JIT ä¼˜åŒ–åªèƒ½é’ˆå¯¹é™æ€ç±»å‹çš„å˜é‡ï¼Œå¦‚æˆ‘ä»¬è¦ä¼˜åŒ–çš„å‡½æ•°ï¼Œå®ƒåªæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œæ¯ä¸ªå‚æ•°çš„ç±»å‹æ˜¯ç¡®å®šçš„ï¼Œè€Œ JavaScript\nå´æ˜¯ä¸€é—¨åŠ¨æ€ç±»å‹çš„è¯­è¨€ï¼Œè¿™ä¹Ÿæ„å‘³ç€ï¼Œå‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ç±»å‹ä¼šåŠ¨æ€å˜åŒ–ï¼Œå‚æ•°å¯èƒ½å˜æˆä¸‰ä¸ªï¼Œç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹å¯èƒ½ä»å¯¹è±¡å˜ä¸ºæ•°ç»„ï¼Œè¿™å°±ä¼šå¯¼è‡´ JIT å¤±æ•ˆï¼Œéœ€è¦é‡æ–°è¿›è¡Œ\nParser-Compiler-Interpreter-Execuationï¼Œè€Œ Parser-Compiler è¿™ä¸¤æ­¥æ˜¯æ•´ä¸ªä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­æœ€è€—è´¹æ—¶é—´çš„ä¸¤æ­¥ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ JavaScript è¯­è¨€èƒŒæ™¯ä¸‹ï¼ŒWeb\næ— æ³•æ‰§è¡Œä¸€äº›é«˜æ€§èƒ½åº”ç”¨ï¼Œå¦‚å¤§å‹æ¸¸æˆã€è§†é¢‘å‰ªè¾‘ç­‰ã€‚")]),s._v(" "),a("h2",{attrs:{id:"é™æ€è¯­è¨€ä¼˜åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é™æ€è¯­è¨€ä¼˜åŒ–"}},[s._v("#")]),s._v(" é™æ€è¯­è¨€ä¼˜åŒ–")]),s._v(" "),a("p",[s._v("é€šè¿‡ä¸Šé¢çš„è¯´æ˜äº†è§£åˆ°ï¼Œå…¶å® JS æ‰§è¡Œæ…¢çš„ä¸€ä¸ªä¸»è¦åŸå› æ˜¯å› ä¸ºå…¶åŠ¨æ€è¯­è¨€çš„ç‰¹æ€§ï¼Œå¯¼è‡´ JIT å¤±æ•ˆï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä¸º JS å¼•å…¥é™æ€ç‰¹æ€§ï¼Œé‚£ä¹ˆå¯ä»¥ä¿æŒæœ‰æ•ˆçš„ JITï¼ŒåŠ¿å¿…ä¼šåŠ å¿« JS çš„æ‰§è¡Œé€Ÿåº¦ï¼Œè¿™ä¸ªæ—¶å€™ asm.js å‡ºç°äº†ã€‚")]),s._v(" "),a("p",[s._v("asm.js åªæä¾›ä¸¤ç§æ•°æ®ç±»å‹ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("32 ä½å¸¦ç¬¦å·æ•´æ•°")]),s._v(" "),a("li",[s._v("64 ä½å¸¦ç¬¦å·æµ®ç‚¹æ•°")])]),s._v(" "),a("p",[s._v("å…¶ä»–ç±»ä¼¼å¦‚å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼æˆ–å¯¹è±¡éƒ½æ˜¯ä»¥æ•°å€¼çš„å½¢å¼ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œé€šè¿‡ TypedArray è°ƒç”¨ã€‚æ•´æ•°å’Œæµ®ç‚¹æ•°è¡¨ç¤ºå¦‚ä¸‹ï¼š")]),s._v(" "),a("p",[s._v(">"),a("code",[s._v("ArrayBuffer")]),s._v("å¯¹è±¡ã€"),a("code",[s._v("TypedArray")]),s._v("è§†å›¾å’Œ"),a("code",[s._v("DataView")]),s._v(" è§†å›¾æ˜¯ JavaScript æ“ä½œäºŒè¿›åˆ¶æ•°æ®çš„ä¸€ä¸ªæ¥å£ï¼Œä»¥æ•°ç»„çš„è¯­æ³•å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œç»Ÿç§°ä¸ºäºŒè¿›åˆ¶æ•°ç»„ã€‚å‚è€ƒ "),a("a",{attrs:{href:"https://es6.ruanyifeng.com/#docs/arraybuffer",target:"_blank",rel:"noopener noreferrer"}},[s._v("ArrayBuffer"),a("OutboundLink")],1),s._v(" ã€‚")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// x æ˜¯32ä½æ•´æ•°")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// y æ˜¯64ä½æµ®ç‚¹æ•°")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("è€Œå‡½æ•°çš„å†™æ³•å¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("ä¸Šè¿°çš„å‡½æ•°å‚æ•°åŠè¿”å›å€¼éƒ½éœ€è¦å£°æ˜ç±»å‹ï¼Œè¿™é‡Œéƒ½æ˜¯ 32 ä½æ•´æ•°ã€‚")]),s._v(" "),a("p",[s._v("è€Œä¸” asm.js ä¹Ÿä¸æä¾›åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå†…å­˜æ“ä½œéƒ½æ˜¯ç”±å¼€å‘è€…è‡ªå·±æ§åˆ¶ï¼Œé€šè¿‡ TypedArray ç›´æ¥è¯»å†™å†…å­˜ï¼š")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç”³è¯· 32 MB å†…å­˜")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HEAP8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Int8Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ¯æ¬¡è¯» 1 ä¸ªå­—èŠ‚çš„è§†å›¾ HEAP8")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("compiledCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ptr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HEAP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ptr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HEAP")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ptr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("ä»ä¸Šå¯è§ï¼Œasm.js æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„ JavaScript å­é›†è¦æ±‚å˜é‡çš„ç±»å‹åœ¨è¿è¡Œæ—¶ç¡®å®šä¸”ä¸å¯æ”¹å˜ï¼Œä¸”å»é™¤äº† JavaScript æ‹¥æœ‰çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†å†…å­˜ã€‚è¿™æ · JS å¼•æ“å°±å¯ä»¥åŸºäº asm.js\nçš„ä»£ç è¿›è¡Œå¤§é‡çš„ JIT ä¼˜åŒ–ï¼Œæ®ç»Ÿè®¡ asm.js åœ¨æµè§ˆå™¨é‡Œé¢çš„è¿è¡Œé€Ÿåº¦ï¼Œå¤§çº¦æ˜¯åŸç”Ÿä»£ç ï¼ˆæœºå™¨ç ï¼‰çš„ 50% å·¦å³ã€‚")]),s._v(" "),a("h2",{attrs:{id:"æ¨é™ˆå‡ºæ–°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¨é™ˆå‡ºæ–°"}},[s._v("#")]),s._v(" æ¨é™ˆå‡ºæ–°")]),s._v(" "),a("p",[s._v("ä½†æ˜¯ä¸ç®¡ asm.js å†æ€ä¹ˆé™æ€åŒ–ï¼Œå¹²æ‰ä¸€äº›éœ€è¦è€—æ—¶çš„ä¸Šå±‚æŠ½è±¡ï¼ˆåƒåœ¾æ”¶é›†ç­‰ï¼‰ï¼Œä¹Ÿè¿˜æ˜¯å±äº JavaScript çš„èŒƒç•´ï¼Œä»£ç æ‰§è¡Œä¹Ÿéœ€è¦ Parser-Compiler è¿™ä¸¤ä¸ªè¿‡ç¨‹ï¼Œè€Œè¿™ä¸¤ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯ä»£ç æ‰§è¡Œä¸­æœ€è€—æ—¶çš„ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†æè‡´çš„æ€§èƒ½ï¼ŒWeb çš„å‰æ²¿å¼€å‘è€…ä»¬æŠ›å¼ƒ JavaScriptï¼Œåˆ›é€ äº†ä¸€é—¨å¯ä»¥ç›´æ¥å’Œ Machine Code æ‰“äº¤é“çš„æ±‡ç¼–è¯­è¨€ WebAssemblyï¼Œç›´æ¥å¹²æ‰ Parser-Compilerï¼ŒåŒæ—¶ WebAssembly\næ˜¯ä¸€é—¨å¼ºç±»å‹çš„é™æ€è¯­è¨€ï¼Œèƒ½å¤Ÿè¿›è¡Œæœ€å¤§é™åº¦çš„ JIT ä¼˜åŒ–ï¼Œä½¿å¾— WebAssembly çš„é€Ÿåº¦èƒ½å¤Ÿæ— é™é€¼è¿‘ C/C++ ç­‰åŸç”Ÿä»£ç ã€‚")]),s._v(" "),a("p",[s._v("ç›¸å½“äºä¸‹é¢çš„è¿‡ç¨‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/209f98969c623d68d9d675b828826761.png",alt:""}})]),s._v(" "),a("p",[s._v("æ— éœ€ Parser-Compilerï¼Œç›´æ¥å°±å¯ä»¥æ‰§è¡Œï¼ŒåŒæ—¶å¹²æ‰äº†åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œè€Œä¸” WASM çš„é™æ€å¼ºç±»å‹è¯­è¨€çš„ç‰¹æ€§å¯ä»¥è¿›è¡Œæœ€å¤§ç¨‹åº¦çš„ JIT ä¼˜åŒ–ã€‚")]),s._v(" "),a("h1",{attrs:{id:"webassembly-åˆæ¢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webassembly-åˆæ¢"}},[s._v("#")]),s._v(" WebAssembly åˆæ¢")]),s._v(" "),a("p",[s._v("æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€å¼ å›¾æ¥ç›´è§‚äº†è§£ WebAssembly åœ¨ Web ä¸­çš„ä½ç½®ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/b31d54a14547ae3c176f2c37fc78ecec.png",alt:""}})]),s._v(" "),a("p",[s._v("WebAssemblyï¼ˆä¹Ÿç§°ä¸º WASMï¼‰ï¼Œæ˜¯ä¸€ç§å¯åœ¨ Web ä¸­è¿è¡Œçš„å…¨æ–°è¯­è¨€æ ¼å¼ï¼ŒåŒæ—¶å…¼å…·ä½“ç§¯å°ã€æ€§èƒ½é«˜ã€å¯ç§»æ¤æ€§å¼ºç­‰ç‰¹ç‚¹ï¼Œåœ¨åº•å±‚ä¸Šç±»ä¼¼ Web ä¸­çš„ JavaScriptï¼ŒåŒæ—¶ä¹Ÿæ˜¯ W3C æ‰¿è®¤çš„ Web ä¸­çš„ç¬¬ 4 é—¨è¯­è¨€ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºä»€ä¹ˆè¯´åœ¨åº•å±‚ä¸Šç±»ä¼¼ JavaScriptï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªç†ç”±ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("å’Œ JavaScript åœ¨åŒä¸€ä¸ªå±‚æ¬¡æ‰§è¡Œï¼šJS Engineï¼Œå¦‚ Chrome çš„ V8")]),s._v(" "),a("li",[s._v("å’Œ JavaScript ä¸€æ ·å¯ä»¥æ“ä½œå„ç§ Web API")])]),s._v(" "),a("p",[s._v("åŒæ—¶ WASM ä¹Ÿå¯ä»¥è¿è¡Œåœ¨ Node.js æˆ–å…¶ä»– WASM Runtime ä¸­ã€‚")]),s._v(" "),a("h2",{attrs:{id:"webassembly-æ–‡æœ¬æ ¼å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webassembly-æ–‡æœ¬æ ¼å¼"}},[s._v("#")]),s._v(" WebAssembly æ–‡æœ¬æ ¼å¼")]),s._v(" "),a("p",[s._v("å®é™…ä¸Š WASM æ˜¯ä¸€å †å¯ä»¥ç›´æ¥æ‰§è¡ŒäºŒè¿›åˆ¶æ ¼å¼ï¼Œä½†æ˜¯ä¸ºäº†æ˜“äºåœ¨æ–‡æœ¬ç¼–è¾‘å™¨æˆ–å¼€å‘è€…å·¥å…·é‡Œé¢å±•ç¤ºï¼ŒWASM ä¹Ÿè®¾è®¡äº†ä¸€ç§ â€œä¸­é—´æ€â€ çš„"),a("a",{attrs:{href:"https://webassembly.github.io/spec/core/text/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("æ–‡æœ¬æ ¼å¼"),a("OutboundLink")],1),s._v("ï¼Œä»¥ "),a("code",[s._v(".wat")]),s._v(" æˆ– "),a("code",[s._v(".wast")]),s._v(" ä¸ºæ‰©å±•å‘½åï¼Œç„¶åé€šè¿‡ "),a("a",{attrs:{href:"https://github.com/WebAssembly/wabt",target:"_blank",rel:"noopener noreferrer"}},[s._v("wabt"),a("OutboundLink")],1),s._v(" ç­‰å·¥å…·ï¼Œå°†æ–‡æœ¬æ ¼å¼ä¸‹çš„ WASM è½¬ä¸ºäºŒè¿›åˆ¶æ ¼å¼çš„å¯æ‰§è¡Œä»£ç ï¼Œä»¥ "),a("code",[s._v(".wasm")]),s._v(" ä¸ºæ‰©å±•çš„æ ¼å¼ã€‚")]),s._v(" "),a("p",[s._v("æ¥çœ‹ä¸€æ®µ WASM æ–‡æœ¬æ ¼å¼ä¸‹çš„æ¨¡å—ä»£ç ï¼š")]),s._v(" "),a("div",{staticClass:"language-wasm line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-wasm"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"imports"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"imported_func"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("param")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("i32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"exported_func"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("i32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("const")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("call")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("ä¸Šè¿°ä»£ç é€»è¾‘å¦‚ä¸‹ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª WASM æ¨¡å—ï¼Œç„¶åä»ä¸€ä¸ª "),a("code",[s._v("imports")]),s._v(" JS æ¨¡å—å¯¼å…¥äº†ä¸€ä¸ªå‡½æ•° "),a("code",[s._v("imported_func")]),s._v(" ï¼Œå°†å…¶å‘½åä¸º "),a("code",[s._v("$i")]),s._v(" ï¼Œæ¥æ”¶å‚æ•° "),a("code",[s._v("i32")])]),s._v(" "),a("li",[s._v("ç„¶åå¯¼å‡ºä¸€ä¸ªåä¸º "),a("code",[s._v("exported_func")]),s._v(" çš„å‡½æ•°ï¼Œå¯ä»¥ä» Web Appï¼Œå¦‚ JS ä¸­å¯¼å…¥è¿™ä¸ªå‡½æ•°ä½¿ç”¨")]),s._v(" "),a("li",[s._v("æ¥ç€ä¸ºå‚æ•° "),a("code",[s._v("i32")]),s._v(" ä¼ å…¥ 42ï¼Œç„¶åè°ƒç”¨å‡½æ•° "),a("code",[s._v("$i")])])]),s._v(" "),a("p",[s._v("æˆ‘ä»¬é€šè¿‡ wabt å°†ä¸Šè¿°æ–‡æœ¬æ ¼å¼è½¬ä¸ºäºŒè¿›åˆ¶ä»£ç ï¼š")]),s._v(" "),a("ol",[a("li",[s._v("å°†ä¸Šè¿°ä»£ç å¤åˆ¶åˆ°ä¸€ä¸ªæ–°å»ºçš„ï¼Œåä¸º "),a("code",[s._v("simple.wat")]),s._v(" çš„æ–‡ä»¶ä¸­ä¿å­˜")]),s._v(" "),a("li",[s._v("ä½¿ç”¨ "),a("a",{attrs:{href:"https://github.com/WebAssembly/wabt",target:"_blank",rel:"noopener noreferrer"}},[s._v("wabt"),a("OutboundLink")],1),s._v(" è¿›è¡Œç¼–è¯‘è½¬æ¢")])]),s._v(" "),a("p",[s._v("å½“ä½ å®‰è£…å¥½ wabt ä¹‹åï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼š")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("wat2wasm simple.wat -o simple.wasm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("è™½ç„¶è½¬æ¢æˆäº†äºŒè¿›åˆ¶ï¼Œä½†æ˜¯æ— æ³•åœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹å…¶å†…å®¹ï¼Œä¸ºäº†æŸ¥çœ‹äºŒè¿›åˆ¶çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç¼–è¯‘æ—¶åŠ ä¸Š "),a("code",[s._v("-v")]),s._v(" é€‰é¡¹ï¼Œè®©å†…å®¹åœ¨å‘½ä»¤è¡Œè¾“å‡ºï¼š")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("wat2wasm simple.wat -v\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/6d58d9b9f112adb8c672891c3987735c.png",alt:""}})]),s._v(" "),a("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼ŒWebAssembly å…¶å®æ˜¯äºŒè¿›åˆ¶æ ¼å¼çš„ä»£ç ï¼Œå³ä½¿å…¶æä¾›äº†ç¨ä¸ºæ˜“è¯»çš„æ–‡æœ¬æ ¼å¼ï¼Œä¹Ÿå¾ˆéš¾çœŸæ­£ç”¨äºå®é™…çš„ç¼–ç ï¼Œæ›´åˆ«æå¼€å‘æ•ˆç‡äº†ã€‚")]),s._v(" "),a("h2",{attrs:{id:"å°†-webassembly-ä½œä¸ºç¼–ç¨‹è¯­è¨€çš„ä¸€ç§å°è¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å°†-webassembly-ä½œä¸ºç¼–ç¨‹è¯­è¨€çš„ä¸€ç§å°è¯•"}},[s._v("#")]),s._v(" å°† WebAssembly ä½œä¸ºç¼–ç¨‹è¯­è¨€çš„ä¸€ç§å°è¯•")]),s._v(" "),a("p",[s._v("å› ä¸ºä¸Šè¿°çš„äºŒè¿›åˆ¶å’Œæ–‡æœ¬æ ¼å¼éƒ½ä¸é€‚åˆç¼–ç ï¼Œæ‰€ä»¥ä¸é€‚åˆå°† WASM ä½œä¸ºä¸€é—¨å¯æ­£å¸¸å¼€å‘çš„è¯­è¨€ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†çªç ´è¿™ä¸ªé™åˆ¶ï¼Œ"),a("a",{attrs:{href:"https://www.assemblyscript.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("AssemblyScript"),a("OutboundLink")],1),s._v(" èµ°åˆ°å°å‰ï¼ŒAssemblyScript æ˜¯ TypeScript çš„ä¸€ç§å˜ä½“ï¼Œä¸º\nJavaScript æ·»åŠ äº† "),a("strong",[a("a",{attrs:{href:"https://www.assemblyscript.org/types.html#type-rules",target:"_blank",rel:"noopener noreferrer"}},[s._v("WebAssembly ç±»å‹"),a("OutboundLink")],1)]),s._v("ï¼Œ å¯ä»¥ä½¿ç”¨ "),a("a",{attrs:{href:"https://github.com/WebAssembly/binaryen",target:"_blank",rel:"noopener noreferrer"}},[s._v("Binaryen"),a("OutboundLink")],1),s._v(" å°†å…¶ç¼–è¯‘æˆ WebAssemblyã€‚")]),s._v(" "),a("p",[s._v(">WebAssembly ç±»å‹å¤§è‡´å¦‚ä¸‹ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("i32ã€u32ã€i64ã€v128 ç­‰")]),s._v(" "),a("li",[s._v("å°æ•´æ•°ç±»å‹ï¼ši8ã€u8 ç­‰")]),s._v(" "),a("li",[s._v("å˜é‡æ•´æ•°ç±»å‹ï¼šisizeã€usize ç­‰")])]),s._v(" "),a("p",[s._v("Binaryen ä¼šå‰ç½®å°† AssemblyScript é™æ€ç¼–è¯‘æˆå¼ºç±»å‹çš„ WebAssembly äºŒè¿›åˆ¶ï¼Œç„¶åæ‰ä¼šäº¤ç»™ JS å¼•æ“å»æ‰§è¡Œï¼Œæ‰€ä»¥è¯´è™½ç„¶ AssemblyScript å¸¦æ¥äº†ä¸€å±‚æŠ½è±¡ï¼Œä½†æ˜¯å®é™…ç”¨äºç”Ÿäº§çš„ä»£ç ä¾ç„¶æ˜¯\nWebAssemblyï¼Œä¿æœ‰ WebAssembly çš„æ€§èƒ½ä¼˜åŠ¿ã€‚AssemblyScript è¢«è®¾è®¡çš„å’Œ TypeScript éå¸¸ç›¸ä¼¼ï¼Œæä¾›äº†ä¸€ç»„å†…å»ºçš„å‡½æ•°å¯ä»¥ç›´æ¥æ“ä½œ WebAssembly ä»¥åŠç¼–è¯‘å™¨çš„ç‰¹æ€§.")]),s._v(" "),a("p",[s._v(">å†…å»ºå‡½æ•°ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("é™æ€ç±»å‹æ£€æŸ¥ï¼š\n"),a("ul",[a("li",[a("code",[s._v("function isInteger<t>(value?: T): ``bool")]),s._v(" ç­‰")])])]),s._v(" "),a("li",[s._v("å®ç”¨å‡½æ•°ï¼š\n"),a("ul",[a("li",[a("code",[s._v("function sizeof<t>(): usize")]),s._v(" ç­‰")])])]),s._v(" "),a("li",[s._v("æ“ä½œ WebAssemblyï¼š\n"),a("ul",[a("li",[s._v("æ•°å­¦æ“ä½œ\n"),a("ul",[a("li",[a("code",[s._v("function clz<t>(value: T): T")]),s._v(" ç­‰")])])]),s._v(" "),a("li",[s._v("å†…å­˜æ“ä½œ\n"),a("ul",[a("li",[a("code",[s._v("function load<t>(ptr: usize, immOffset?: usize): T")]),s._v(" ç­‰")])])]),s._v(" "),a("li",[s._v("æ§åˆ¶æµ\n"),a("ul",[a("li",[a("code",[s._v("function select<t>(ifTrue: T, ifFalse: T, condition: ``bool``): T")]),s._v(" ç­‰")])])]),s._v(" "),a("li",[s._v("SIMD")]),s._v(" "),a("li",[s._v("Atomics")]),s._v(" "),a("li",[s._v("Inline instructions")])])])]),s._v(" "),a("p",[s._v("ç„¶ååŸºäºè¿™å¥—å†…å»ºçš„å‡½æ•°å‘ä¸Šæ„å»ºä¸€å¥—æ ‡å‡†åº“ã€‚")]),s._v(" "),a("p",[s._v(">æ ‡å‡†åº“ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("Globals")]),s._v(" "),a("li",[s._v("Array")]),s._v(" "),a("li",[s._v("ArrayBuffer")]),s._v(" "),a("li",[s._v("DataView")]),s._v(" "),a("li",[s._v("Date")]),s._v(" "),a("li",[s._v("Error")]),s._v(" "),a("li",[s._v("Map")]),s._v(" "),a("li",[s._v("Math")]),s._v(" "),a("li",[s._v("Number")]),s._v(" "),a("li",[s._v("Set")]),s._v(" "),a("li",[s._v("String")]),s._v(" "),a("li",[s._v("Symbol")]),s._v(" "),a("li",[s._v("TypedArray")])]),s._v(" "),a("p",[s._v("å¦‚ä¸€ä¸ªå…¸å‹çš„ Array çš„ä½¿ç”¨å¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Array")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("string"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// arr[0]; // ä¼šå‡ºé”™ ğŸ˜¢")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿›è¡Œåˆå§‹åŒ–")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("lt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\narr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯ä»¥æ­£ç¡®å·¥ä½œ ğŸ˜Š")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("å¯ä»¥çœ‹åˆ° AssemblyScript åœ¨ä¸º JavaScript æ·»åŠ ç±»ä¼¼ TypeScript é‚£æ ·çš„è¯­æ³•ï¼Œç„¶ååœ¨ä½¿ç”¨ä¸Šéœ€è¦ä¿æŒå’Œ C/C++ ç­‰é™æ€å¼ºç±»å‹çš„è¦æ±‚ï¼Œå¦‚ä¸åˆå§‹åŒ–ï¼Œè¿›è¡Œå†…å­˜åˆ†é…å°±è®¿é—®å°±ä¼šæŠ¥é”™ã€‚")]),s._v(" "),a("p",[s._v("è¿˜æœ‰ä¸€äº›æ‰©å±•åº“ï¼Œå¦‚ Node.js çš„ processã€crypto ç­‰ï¼ŒJS çš„ consoleï¼Œè¿˜æœ‰ä¸€äº›å’Œå†…å­˜ç›¸å…³çš„ StaticArrayã€heap ç­‰ã€‚")]),s._v(" "),a("p",[s._v("å¯ä»¥çœ‹åˆ°é€šè¿‡ä¸Šé¢åŸºç¡€çš„ç±»å‹ã€å†…å»ºåº“ã€æ ‡å‡†åº“å’Œæ‰©å±•åº“ï¼ŒAssemblyScript åŸºæœ¬ä¸Šæ„é€ äº† JavaScript æ‰€æ‹¥æœ‰çš„çš„å…¨éƒ¨ç‰¹æ€§ï¼ŒåŒæ—¶ AssemblyScript æä¾›äº†ç±»ä¼¼ TypeScript\nçš„è¯­æ³•ï¼Œåœ¨å†™æ³•ä¸Šä¸¥æ ¼éµå¾ªå¼ºç±»å‹é™æ€è¯­è¨€çš„è§„èŒƒã€‚")]),s._v(" "),a("p",[s._v("å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå› ä¸ºå½“å‰ WebAssembly çš„ ES æ¨¡å—è§„èŒƒä¾ç„¶åœ¨è‰æ¡ˆä¸­ï¼ŒAssemblyScript è‡ªè¡Œè¿›è¡Œäº†æ¨¡å—çš„å®ç°ï¼Œä¾‹å¦‚å¯¼å‡ºä¸€ä¸ªæ¨¡å—ï¼š")]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// env.ts")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("doSomething")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("foo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* ... å‡½æ•°ä½“ */")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("å¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼š")]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" doSomething "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./env"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ä¸€ä¸ªå¤§æ®µä»£ç ã€ä½¿ç”¨ç±»çš„ä¾‹å­ï¼š")]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Animal")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ONE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i32 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i32 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" Animal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ONE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  two"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i16 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 6   instanceSub<t>(a: T, b: T): T { return a - b + <t>Animal.ONE; } // tsc does not allow this }")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("staticOne")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i32 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Animal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ONE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("staticAdd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i32 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Animal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("instanceTwo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" i32 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" animal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Animal")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("i32"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" animal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("two"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("instanceSub")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" f32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" f32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" f32 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" animal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Animal")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("f32"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" animal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("instanceSub"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("f32"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("p",[s._v("AssemblyScript ä¸ºæˆ‘ä»¬æ‰“å¼€äº†ä¸€æ‰‡æ–°çš„å¤§é—¨ï¼Œå¯ä»¥ä»¥ TS å½¢å¼çš„è¯­æ³•ï¼Œéµå¾ªé™æ€å¼ºç±»å‹çš„è§„èŒƒè¿›è¡Œé«˜æ•ˆç¼–ç ï¼ŒåŒæ—¶åˆèƒ½å¤Ÿä¾¿æ·çš„æ“ä½œ WebAssembly/ç¼–è¯‘å™¨ç›¸å…³çš„ APIï¼Œä»£ç å†™å®Œä¹‹åï¼Œé€šè¿‡ Binaryen\nç¼–è¯‘å™¨å°†å…¶ç¼–è¯‘ä¸º WASM äºŒè¿›åˆ¶ï¼Œç„¶åè·å–åˆ° WASM çš„æ‰§è¡Œæ€§èƒ½ã€‚")]),s._v(" "),a("p",[s._v("å¾—ç›Šäº AssemblyScript å…¼å…·çµæ´»æ€§ä¸æ€§èƒ½ï¼Œç›®å‰ä½¿ç”¨ AssemblyScript æ„å»ºçš„åº”ç”¨ç”Ÿæ€å·²ç»åˆå…·ç¹è£ï¼Œç›®å‰åœ¨åŒºå—é“¾ã€æ„å»ºå·¥å…·ã€ç¼–è¾‘å™¨ã€æ¨¡æ‹Ÿå™¨ã€æ¸¸æˆã€å›¾å½¢ç¼–è¾‘å·¥å…·ã€åº“ã€IoTã€æµ‹è¯•å·¥å…·ç­‰æ–¹é¢éƒ½æœ‰å¤§é‡ä½¿ç”¨\nAssemblyScript æ„å»ºçš„äº§ç‰©ï¼š"),a("a",{attrs:{href:"https://www.assemblyscript.org/built-with-assemblyscript.html#games",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.assemblyscript.org/built-with-assemblyscript.html#games"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v(">ä¸Šé¢æ˜¯ä½¿ç”¨ AssemblyScript æ„å»ºçš„ä¸€ä¸ªäº”å­æ£‹æ¸¸æˆã€‚")]),s._v(" "),a("h2",{attrs:{id:"ä¸€ç§é¬¼æ‰å“²å­¦ï¼šå°†-c-c-ä»£ç è·‘åœ¨æµè§ˆå™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ç§é¬¼æ‰å“²å­¦ï¼šå°†-c-c-ä»£ç è·‘åœ¨æµè§ˆå™¨"}},[s._v("#")]),s._v(" ä¸€ç§é¬¼æ‰å“²å­¦ï¼šå°† C/C++ ä»£ç è·‘åœ¨æµè§ˆå™¨")]),s._v(" "),a("p",[s._v("è™½ç„¶ AssemblyScript çš„å‡ºç°æå¤§çš„æ”¹å–„äº† WebAssembly åœ¨é«˜æ•ˆç‡ç¼–ç æ–¹é¢çš„ç¼ºé™·ï¼Œä½†æ˜¯ä½œä¸ºä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œå…¶æœ€å¤§çš„åŠ£åŠ¿å°±æ˜¯ç”Ÿæ€ã€å¼€å‘è€…ä¸ç§¯ç´¯ã€‚")]),s._v(" "),a("p",[s._v("WebAssembly çš„è®¾è®¡è€…æ˜¾ç„¶åœ¨è®¾è®¡ä¸ŠåŒæ—¶è€ƒè™‘åˆ°äº†å„ç§å®Œå–„çš„æƒ…å†µï¼Œæ—¢ç„¶ WebAssembly\næ˜¯ä¸€ç§äºŒè¿›åˆ¶æ ¼å¼ï¼Œé‚£ä¹ˆå…¶å°±å¯ä»¥ä½œä¸ºå…¶ä»–è¯­è¨€çš„ç¼–è¯‘ç›®æ ‡ï¼Œå¦‚æœèƒ½å¤Ÿæ„å»ºä¸€ç§ç¼–è¯‘å™¨ï¼Œèƒ½å¤Ÿå°†å·²æœ‰çš„ã€æˆç†Ÿçš„ã€ä¸”å…¼å…·æµ·é‡çš„å¼€å‘è€…å’Œå¼ºå¤§çš„ç”Ÿæ€çš„è¯­è¨€ç¼–è¯‘åˆ° WebAssembly ä½¿ç”¨ï¼Œé‚£ä¹ˆç›¸å½“äºå¯ä»¥ç›´æ¥å¤ç”¨è¿™ä¸ªè¯­è¨€å¤šå¹´çš„ç§¯ç´¯ï¼Œå¹¶ç”¨å®ƒä»¬æ¥å®Œå–„\nWebAssembly ç”Ÿæ€ï¼Œå°†å®ƒä»¬è¿è¡Œåœ¨ Webã€Node.js ä¸­ã€‚")]),s._v(" "),a("p",[s._v("å¹¸è¿çš„æ˜¯ï¼Œé’ˆå¯¹ C/C++ å·²ç»æœ‰ "),a("a",{attrs:{href:"https://github.com/emscripten-core/emscripten",target:"_blank",rel:"noopener noreferrer"}},[s._v("Emscripten"),a("OutboundLink")],1),s._v(" è¿™æ ·ä¼˜ç§€çš„ç¼–è¯‘å™¨å­˜åœ¨äº†ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/f7d05625019a486047d30d471815935f.png",alt:""}})]),s._v(" "),a("p",[s._v("å¯ä»¥é€šè¿‡ä¸‹é¢è¿™å¼ å›¾ç›´è§‚çš„é˜è¿° Emscripten åœ¨å¼€å‘é“¾è·¯ä¸­çš„åœ°ä½ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/bcc371762bdab5d31e56e344494b0d6b.png",alt:""}})]),s._v(" "),a("p",[s._v("å³å°† C/C++ çš„ä»£ç ï¼ˆæˆ–è€… Rust/Go ç­‰ï¼‰ç¼–è¯‘æˆ WASMï¼Œç„¶åé€šè¿‡ JS èƒ¶æ°´ä»£ç å°† WASM è·‘åœ¨æµè§ˆå™¨ä¸­ï¼ˆæˆ– Node.jsï¼‰çš„ runtimeï¼Œå¦‚ ffmpeg è¿™ä¸ªä½¿ç”¨ C ç¼–å†™éŸ³è§†é¢‘è½¬ç å·¥å…·ï¼Œé€šè¿‡\nEmscripten ç¼–è¯‘å™¨ç¼–è¯‘åˆ° Web ä¸­ä½¿ç”¨ï¼Œå¯ç›´æ¥åœ¨æµè§ˆå™¨å‰ç«¯è½¬ç éŸ³è§†é¢‘ã€‚")]),s._v(" "),a("p",[s._v(">ä¸Šè¿°çš„ JS â€œGuleâ€ ä»£ç æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºå¦‚æœéœ€è¦å°† C/C++ ç¼–è¯‘åˆ° WASMï¼Œè¿˜èƒ½åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œï¼Œå°±å¾—å®ç°æ˜ å°„åˆ° C/C++ ç›¸å…³æ“ä½œçš„ Web APIï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ‰§è¡Œæœ‰æ•ˆï¼Œè¿™äº›èƒ¶æ°´ä»£ç ç›®å‰åŒ…å«ä¸€äº›æ¯”è¾ƒæµè¡Œçš„ C/C++ åº“ï¼Œå¦‚ "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Simple_DirectMedia_Layer",target:"_blank",rel:"noopener noreferrer"}},[s._v("SDL"),a("OutboundLink")],1),s._v("ã€"),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/OpenGL",target:"_blank",rel:"noopener noreferrer"}},[s._v("OpenGL"),a("OutboundLink")],1),s._v("ã€"),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/OpenAL",target:"_blank",rel:"noopener noreferrer"}},[s._v("OpenAL"),a("OutboundLink")],1),s._v("ã€ä»¥åŠ "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/POSIX",target:"_blank",rel:"noopener noreferrer"}},[s._v("POSIX"),a("OutboundLink")],1),s._v(" çš„ä¸€éƒ¨åˆ† APIã€‚")]),s._v(" "),a("p",[s._v("ç›®å‰ä½¿ç”¨ WebAssembly æœ€å¤§çš„åœºæ™¯ä¹Ÿæ˜¯è¿™ç§å°† C/C++ æ¨¡å—ç¼–è¯‘åˆ° WASM çš„æ–¹å¼ï¼Œæ¯”è¾ƒæœ‰åçš„ä¾‹å­æœ‰ "),a("a",{attrs:{href:"https://blog.mozilla.org/blog/2014/03/12/mozilla-and-epic-preview-unreal-engine-4-running-in-firefox/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Unreal Engine 4"),a("OutboundLink")],1),s._v("ã€"),a("a",{attrs:{href:"https://blogs.unity3d.com/2018/08/15/webassembly-is-here/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Unity"),a("OutboundLink")],1),s._v(" ä¹‹ç±»çš„å¤§å‹åº“æˆ–åº”ç”¨ã€‚")]),s._v(" "),a("h2",{attrs:{id:"webassembly-ä¼šå–ä»£-javascript-å—ï¼Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webassembly-ä¼šå–ä»£-javascript-å—ï¼Ÿ"}},[s._v("#")]),s._v(" WebAssembly ä¼šå–ä»£ JavaScript å—ï¼Ÿ")]),s._v(" "),a("p",[s._v("ç­”æ¡ˆæ˜¯ä¸ä¼šã€‚")]),s._v(" "),a("p",[s._v("æ ¹æ®ä¸Šé¢çš„å±‚å±‚é˜è¿°ï¼Œå®é™…ä¸Š WASM çš„è®¾è®¡åˆè¡·å°±å¯ä»¥æ¢³ç†ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š")]),s._v(" "),a("ul",[a("li",[s._v("æœ€å¤§ç¨‹åº¦çš„å¤ç”¨ç°æœ‰çš„åº•å±‚è¯­è¨€ç”Ÿæ€ï¼Œå¦‚ C/C++ åœ¨æ¸¸æˆå¼€å‘ã€ç¼–è¯‘å™¨è®¾è®¡ç­‰æ–¹é¢çš„ç§¯æ·€")]),s._v(" "),a("li",[s._v("åœ¨ Webã€Node.js æˆ–å…¶ä»– WASM runtime è·å¾—è¿‘ä¹äºåŸç”Ÿçš„æ€§èƒ½ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è®©æµè§ˆå™¨ä¹Ÿèƒ½è·‘å¤§å‹æ¸¸æˆã€å›¾åƒå‰ªè¾‘ç­‰åº”ç”¨")]),s._v(" "),a("li",[s._v("è¿˜æœ‰æœ€å¤§ç¨‹åº¦çš„å…¼å®¹ Webã€ä¿è¯å®‰å…¨")]),s._v(" "),a("li",[s._v("åŒæ—¶åœ¨å¼€å‘ä¸Šï¼ˆå¦‚æœéœ€è¦å¼€å‘ï¼‰æ˜“äºè¯»å†™å’Œå¯è°ƒè¯•ï¼Œè¿™ä¸€ç‚¹ AssemblyScript èµ°å¾—æ›´è¿œ")])]),s._v(" "),a("p",[s._v("æ‰€ä»¥ä»åˆè¡·å‡ºå‘ï¼ŒWebAssembly çš„ä½œç”¨æ›´é€‚åˆä¸‹é¢è¿™å¼ å›¾ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/8db810a71c6bcb688816f7b2953bfaa2.png",alt:""}})]),s._v(" "),a("p",[s._v("WASM æ¡¥æ¥å„ç§ç³»ç»Ÿç¼–ç¨‹è¯­è¨€çš„ç”Ÿæ€ï¼Œè¿‘ä¸€æ­¥è¡¥é½äº† Web å¼€å‘ç”Ÿæ€ä¹‹å¤–ï¼Œè¿˜ä¸º JS æä¾›æ€§èƒ½çš„è¡¥å……ï¼Œæ­£æ˜¯ Web å‘å±•è‡³ä»Šæ‰€ç¼ºå¤±çš„é‡è¦çš„ä¸€å—ç‰ˆå›¾ã€‚")]),s._v(" "),a("p",[s._v(">Rust Web Frameworkï¼š"),a("a",{attrs:{href:"https://github.com/yewstack/yew",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/yewstack/yew"),a("OutboundLink")],1)]),s._v(" "),a("h1",{attrs:{id:"æ·±å…¥æ¢ç´¢-emscripten"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ·±å…¥æ¢ç´¢-emscripten"}},[s._v("#")]),s._v(" æ·±å…¥æ¢ç´¢ Emscripten")]),s._v(" "),a("p",[s._v(">åœ°å€ï¼š"),a("a",{attrs:{href:"https://github.com/emscripten-core/emscripten",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/emscripten-core/emscripten"),a("OutboundLink")],1),s._v("\n>ä¸‹é¢æ‰€æœ‰çš„ demo éƒ½å¯ä»¥åœ¨ä»“åº“ï¼š"),a("a",{attrs:{href:"https://code.byted.org/huangwei.fps/webassembly-demos/tree/master",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://code.byted.org/huangwei.fps/webassembly-demos/tree/master"),a("OutboundLink")],1),s._v("æ‰¾åˆ°\n>Starï¼š21.4K\n>ç»´æŠ¤ï¼šæ´»è·ƒ")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/fdab0ea6d987131c3a89653759d46b92.png",alt:""}})]),s._v(" "),a("p",[s._v("Emscripten æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œè·¨å¹³å°çš„ï¼Œç”¨äºå°† C/C++ ç¼–è¯‘ä¸º WebAssembly çš„ç¼–è¯‘å™¨å·¥å…·é“¾ï¼Œç”± LLVMã€Binaryenã€Closure Compiler å’Œå…¶ä»–å·¥å…·ç­‰ç»„æˆã€‚")]),s._v(" "),a("p",[s._v("Emscripten çš„æ ¸å¿ƒå·¥å…·ä¸º Emscripten Compiler Frontendï¼ˆemccï¼‰ï¼Œemcc æ˜¯ç”¨äºæ›¿ä»£ä¸€äº›åŸç”Ÿçš„ç¼–è¯‘å™¨å¦‚ gcc æˆ– clangï¼Œå¯¹ C/C++ ä»£ç è¿›è¡Œç¼–è¯‘ã€‚")]),s._v(" "),a("p",[s._v("å®é™…ä¸Šä¸ºäº†èƒ½è®©å‡ ä¹æ‰€æœ‰çš„å¯ç§»æ¤çš„ C/C++ ä»£ç åº“èƒ½å¤Ÿç¼–è¯‘ä¸º WebAssemblyï¼Œå¹¶åœ¨ Web æˆ– Node.js æ‰§è¡Œï¼ŒEmscripten Runtime å…¶å®è¿˜æä¾›äº†å…¼å®¹ C/C++ æ ‡å‡†åº“ã€ç›¸å…³ API åˆ°\nWeb/Node.js API çš„æ˜ å°„ï¼Œè¿™ä»½æ˜ å°„å­˜åœ¨äºç¼–è¯‘ä¹‹åçš„ JS èƒ¶æ°´ä»£ç ä¸­ã€‚")]),s._v(" "),a("p",[s._v("å†çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼Œçº¢è‰²éƒ¨åˆ†ä¸º Emscripten ç¼–è¯‘åçš„äº§ç‰©ï¼Œç»¿è‰²éƒ¨åˆ†ä¸º Emscripten ä¸ºä¿è¯ C/C++ ä»£ç èƒ½å¤Ÿè¿è¡Œçš„ä¸€äº› runtime æ”¯æŒï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/d13e2d64d38e8535a57142749e8b96fc.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"ç®€å•ä½“éªŒä¸€ä¸‹-hello-world"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•ä½“éªŒä¸€ä¸‹-hello-world"}},[s._v("#")]),s._v(" ç®€å•ä½“éªŒä¸€ä¸‹ â€œHello Worldâ€")]),s._v(" "),a("p",[s._v("å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒWebAssembly ç›¸å…³å·¥å…·é“¾çš„å®‰è£…å‡ ä¹éƒ½æ˜¯ä»¥æºç çš„å½¢å¼æä¾›ï¼Œè¿™å¯èƒ½å’Œ C/C++ ç”Ÿæ€çš„ä¹ æƒ¯ä¸æ— å…³ç³»ã€‚")]),s._v(" "),a("p",[s._v("ä¸ºäº†å®Œæˆç®€å•çš„ C/C++ ç¨‹åºè¿è¡Œåœ¨ Webï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å®‰è£… Emscripten çš„ SDKï¼š")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Clone ä»£ç ä»“åº“")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https: // github "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" com / emscripten-core / emsdk "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿›å…¥ä»“åº“")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" emsdk\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è·å–æœ€æ–°ä»£ç ï¼Œå¦‚æœæ˜¯æ–° clone çš„è¿™ä¸€æ­¥å¯ä»¥ä¸éœ€è¦")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å®‰è£… SDK å·¥å…·ï¼Œæˆ‘ä»¬å®‰è£… 1.39.18ï¼Œæ–¹ä¾¿æµ‹è¯•")]),s._v("\n./emsdk "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.39")]),s._v(".18\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ¿€æ´» SDK")]),s._v("\n./emsdk activate "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.39")]),s._v(".18\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å°†ç›¸åº”çš„ç¯å¢ƒå˜é‡åŠ å…¥åˆ°ç³»ç»Ÿ PATH")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ./emsdk_env.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿è¡Œå‘½ä»¤æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ")]),s._v("\nemcc -v "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("å¦‚æœå®‰è£…æˆåŠŸï¼Œä¸Šè¿°çš„å‘½ä»¤è¿è¡Œä¹‹åä¼šè¾“å‡ºå¦‚ä¸‹ç»“æœï¼š")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("emcc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Emscripten gcc/clang-like replacement + linker emulating GNU ld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.39")]),s._v(".18\nclang version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.0")]),s._v(".0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/b/s/w/ir/cache/git/chromium.googlesource.com-external-github.com-llvm-llvm--project 613c4a87ba9bb39d1927402f4dd4c1ef1f9a02f7"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nTarget: x86_64-apple-darwin21.1.0\nThread model: posix\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("è®©æˆ‘ä»¬å‡†å¤‡åˆå§‹ä»£ç ï¼š")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -r webassembly/hello_world\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" webassembly/hello_world "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("amp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("amp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" main.c\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("åœ¨ "),a("code",[s._v("main.c")]),s._v(" ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š")]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[s._v("#"),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("<stdio.h>")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("printf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello, world!\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("ç„¶åä½¿ç”¨ emcc æ¥ç¼–è¯‘è¿™æ®µ C ä»£ç ï¼Œåœ¨å‘½ä»¤è¡Œåˆ‡æ¢åˆ° "),a("code",[s._v("webassembly/hello_world")]),s._v(" ç›®å½•ï¼Œè¿è¡Œï¼š")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("emcc main.c\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ä¸Šè¿°å‘½ä»¤ä¼šè¾“å‡ºä¸¤ä¸ªæ–‡ä»¶ï¼š"),a("code",[s._v("a.out.js")]),s._v(" å’Œ "),a("code",[s._v("a.out.wasm")]),s._v(" ï¼Œåè€…ä¸ºç¼–è¯‘ä¹‹åçš„ wasm ä»£ç ï¼Œå‰è€…ä¸º JS èƒ¶æ°´ä»£ç ï¼Œæä¾›äº† WASM è¿è¡Œçš„ runtimeã€‚")]),s._v(" "),a("p",[s._v("å¯ä»¥ä½¿ç”¨ Node.js è¿›è¡Œå¿«é€Ÿæµ‹è¯•ï¼š")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("node a.out.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ä¼šè¾“å‡º "),a("code",[s._v('"hello, world!"')]),s._v(" ï¼Œæˆ‘ä»¬æˆåŠŸå°† C/C++ ä»£ç è¿è¡Œåœ¨äº† Node.js ç¯å¢ƒã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/8e4a718982a500bb73d2788a594c6a41.png",alt:""}})]),s._v(" "),a("p",[s._v("æ¥ä¸‹æ¥æˆ‘ä»¬å°è¯•ä¸€ä¸‹å°†ä»£ç è¿è¡Œåœ¨ Web ç¯å¢ƒï¼Œä¿®æ”¹ç¼–è¯‘ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("emcc main.c -o main.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ä¸Šè¿°å‘½ä»¤ä¼šç”Ÿæˆä¸‰ä¸ªæ–‡ä»¶ï¼š")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("main.js")]),s._v(" èƒ¶æ°´ä»£ç ")]),s._v(" "),a("li",[a("code",[s._v("main.wasm")]),s._v(" WASM ä»£ç ")]),s._v(" "),a("li",[a("code",[s._v("main.html")]),s._v(" åŠ è½½èƒ¶æ°´ä»£ç ï¼Œæ‰§è¡Œ WASM çš„ä¸€äº›é€»è¾‘")])]),s._v(" "),a("p",[s._v(">Emscripten ç”Ÿæˆä»£ç æœ‰ä¸€å®šçš„è§„åˆ™ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼š"),a("a",{attrs:{href:"https://emscripten.org/docs/compiling/Building-Projects.html#emscripten-linker-output-files",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://emscripten.org/docs/compiling/Building-Projects.html#emscripten-linker-output-files"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("å¦‚æœè¦åœ¨æµè§ˆå™¨æ‰“å¼€è¿™ä¸ª HTMLï¼Œéœ€è¦åœ¨æœ¬åœ°èµ·ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå› ä¸ºå•çº¯çš„æ‰“å¼€é€šè¿‡ "),a("code",[s._v("file://")]),s._v(" åè®®è®¿é—®æ—¶ï¼Œä¸»æµæµè§ˆå™¨ä¸æ”¯æŒ XHR è¯·æ±‚ï¼Œåªæœ‰åœ¨ HTTP æœåŠ¡å™¨ä¸‹ï¼Œæ‰èƒ½è¿›è¡Œ XHR\nè¯·æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿è¡Œå¦‚ä¸‹å‘½ä»¤æ¥æ‰“å¼€ç½‘ç«™ï¼š")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("npx serve "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("æ‰“å¼€ç½‘é¡µï¼Œè®¿é—® "),a("a",{attrs:{href:"http://localhost:3000/main.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("localhost:3000/main.html"),a("OutboundLink")],1),s._v("ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/61834ddc3a88834e2c06634dac7973e8.png",alt:""}})]),s._v(" "),a("p",[s._v("åŒæ—¶å¼€å‘è€…å·¥å…·é‡Œé¢ä¹Ÿä¼šæœ‰ç›¸åº”çš„æ‰“å°è¾“å‡ºï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/fee633db283ec5cef5b44d3dd96f5d7f.png",alt:""}})]),s._v(" "),a("p",[s._v("æˆ‘ä»¬æˆåŠŸçš„å°† C ä»£ç è·‘åœ¨äº† Node.js å’Œæµè§ˆå™¨ï¼")]),s._v(" "),a("h1",{attrs:{id:"å…³äº-webassembly-çš„æœªæ¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…³äº-webassembly-çš„æœªæ¥"}},[s._v("#")]),s._v(" å…³äº WebAssembly çš„æœªæ¥")]),s._v(" "),a("p",[s._v("æœ¬æ–‡ä»…ä»…åˆ—ä¸¾äº†ä¸€äº› WebAssembly å½“å‰çš„ä¸€äº›ä¸»è¦åº”ç”¨åœºæ™¯ï¼ŒåŒ…å« WebAssembly çš„é«˜æ€§èƒ½ã€è½»é‡å’Œè·¨å¹³å°ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å°† C/C++ ç­‰è¯­è¨€è¿è¡Œåœ¨ Webï¼Œä¹Ÿå¯ä»¥å°†æ¡Œé¢ç«¯åº”ç”¨è·‘åœ¨ Web å®¹å™¨ã€‚")]),s._v(" "),a("p",[s._v("ä½†æ˜¯è¿™ç¯‡æ–‡ç« æ²¡æœ‰æ¶‰åŠåˆ°çš„å†…å®¹æœ‰ "),a("a",{attrs:{href:"https://github.com/WebAssembly/WASI",target:"_blank",rel:"noopener noreferrer"}},[s._v("WASI"),a("OutboundLink")],1),s._v("ï¼Œä¸€ç§å°† WebAssembly è·‘åœ¨ä»»ä½•ç³»ç»Ÿä¸Šçš„æ ‡å‡†åŒ–ç³»ç»Ÿæ¥å£ï¼Œå½“ WebAssembly\nçš„æ€§èƒ½é€æ¸å¢å¼ºæ—¶ï¼ŒWASI å¯ä»¥æä¾›ä¸€ç§æ°æ˜¯å¯è¡Œçš„æ–¹å¼ï¼Œå¯ä»¥åœ¨ä»»æ„å¹³å°ä¸Šè¿è¡Œä»»æ„çš„ä»£ç ï¼Œå°±åƒ Docker æ‰€åšçš„ä¸€æ ·ï¼Œä½†æ˜¯ä¸éœ€è¦å—é™äºæ“ä½œç³»ç»Ÿã€‚æ­£å¦‚ Docker çš„åˆ›å§‹äººæ‰€è¯´ï¼š")]),s._v(" "),a("p",[s._v(">â€œ å¦‚æœ WASM+WASI åœ¨ 2008 å¹´å°±å‡ºç°çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦åˆ›é€  Docker äº†ï¼ŒæœåŠ¡å™¨ä¸Šçš„ WASM æ˜¯è®¡ç®—çš„æœªæ¥ï¼Œæ˜¯æˆ‘ä»¬æœŸå¾…å·²ä¹…çš„æ ‡å‡†åŒ–çš„ç³»ç»Ÿæ¥å£ã€‚")]),s._v(" "),a("p",[s._v("å¦ä¸€ä¸ªæœ‰æ„æ€çš„å†…å®¹æ˜¯ WASM çš„å®¢æˆ·ç«¯å¼€å‘æ¡†æ¶å¦‚ "),a("a",{attrs:{href:"https://github.com/yewstack/yew",target:"_blank",rel:"noopener noreferrer"}},[s._v("yew"),a("OutboundLink")],1),s._v("ï¼Œæœªæ¥å¯èƒ½å°†åƒ React/Vue/Angular ä¸€æ ·æµè¡Œã€‚")]),s._v(" "),a("p",[s._v("è€Œ WASM çš„åŒ…ç®¡ç†å·¥å…· "),a("a",{attrs:{href:"https://wapm.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("WAPM"),a("OutboundLink")],1),s._v("ï¼Œå¾—ç›Šäº WASM çš„è·¨å¹³å°ç‰¹æ€§ï¼Œå¯èƒ½ä¼šå˜æˆä¸€ç§åœ¨ä¸åŒè¯­è¨€çš„ä¸åŒæ¡†æ¶ä¹‹é—´å…±äº«åŒ…çš„é¦–é€‰æ–¹å¼ã€‚")]),s._v(" "),a("p",[s._v("åŒæ—¶ WebAssembly ä¹Ÿæ˜¯ç”± W3C ä¸»è¦è´Ÿè´£å¼€å‘ï¼Œå„å¤§å‚å•†ï¼ŒåŒ…æ‹¬ Microsoftã€Googleã€Mozilla ç­‰èµåŠ©å’Œå…±åŒç»´æŠ¤çš„ä¸€ä¸ªé¡¹ç›®ï¼Œç›¸ä¿¡ WebAssembly ä¼šæœ‰ä¸€ä¸ªéå¸¸å€¼å¾—æœŸå¾…çš„æœªæ¥ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"wasm/ea0f2aa54e85216e5ad7e4b342ad09c0.png",alt:""}})]),s._v(" "),a("h1",{attrs:{id:"å‚è€ƒé“¾æ¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒé“¾æ¥"}},[s._v("#")]),s._v(" å‚è€ƒé“¾æ¥")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2017/09/asmjs_emscripten.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.ruanyifeng.com/blog/2017/09/asmjs_emscripten.html"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://pspdfkit.com/blog/2017/webassembly-a-new-hope/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://pspdfkit.com/blog/2017/webassembly-a-new-hope/"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://hacks.mozilla.org/2017/02/what-makes-webassembly-fast/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hacks.mozilla.org/2017/02/what-makes-webassembly-fast/"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.sitepoint.com/understanding-asm-js/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.sitepoint.com/understanding-asm-js/"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"http://www.cmake.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://www.cmake.org/download/"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/WebAssembly/existing_C_to_wasm",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://developer.mozilla.org/en-US/docs/WebAssembly/existing_C_to_wasm"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://research.mozilla.org/webassembly/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://research.mozilla.org/webassembly/"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://itnext.io/build-ffmpeg-webassembly-version-ffmpeg-js-part-2-compile-with-emscripten-4c581e8c9a16?gi=e525b34f2c21",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://itnext.io/build-ffmpeg-webassembly-version-ffmpeg-js-part-2-compile-with-emscripten-4c581e8c9a16?gi=e525b34f2c21"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://dev.to/alfg/ffmpeg-webassembly-2cbl",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.to/alfg/ffmpeg-webassembly-2cbl"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://gist.github.com/rinthel/f4df3023245dd3e5a27218e8b3d79926",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://gist.github.com/rinthel/f4df3023245dd3e5a27218e8b3d79926"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/Kagami/ffmpeg.js/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/Kagami/ffmpeg.js/"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://qdmana.com/2021/04/20210401214625324n.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://qdmana.com/2021/04/20210401214625324n.html"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/leandromoreira/ffmpeg-libav-tutorial",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/leandromoreira/ffmpeg-libav-tutorial"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"http://ffmpeg.org/doxygen/4.1/examples.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://ffmpeg.org/doxygen/4.1/examples.html"),a("OutboundLink")],1),s._v("\n</stdio.h>")])])])}),[],!1,null,null,null);t.default=n.exports}}]);