(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{730:function(s,e,t){"use strict";t.r(e);var r=t(4),a=Object(r.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"为docker-pull设置代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为docker-pull设置代理"}},[s._v("#")]),s._v(" 为docker pull设置代理")]),s._v(" "),t("p",[s._v("给"),t("code",[s._v("docker pull")]),s._v("意味着通过代理下载镜像。")]),s._v(" "),t("h3",{attrs:{id:"在windows上"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在windows上"}},[s._v("#")]),s._v(" 在windows上")]),s._v(" "),t("p",[s._v("docker desktop上的proxies设置就是设置的"),t("code",[s._v("docker pull")]),s._v("代理。默认情况下是"),t("code",[s._v("10.0.75.1")]),s._v("而不是"),t("code",[s._v("127.0.0.1")]),s._v("，为什么？因为windows上的docker是一个Hyper-V虚拟机，并且有一个虚拟网络，"),t("code",[s._v("10.0.75.1")]),s._v("是主机在虚拟机网络中的地址")]),s._v(" "),t("h3",{attrs:{id:"在linux上"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在linux上"}},[s._v("#")]),s._v(" 在linux上")]),s._v(" "),t("p",[s._v("创建文件"),t("code",[s._v("/etc/systemd/system/docker.service.d/http-proxy.conf")]),s._v("，然后在文件里写：")]),s._v(" "),t("div",{staticClass:"language-conf line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('[Service]\nEnvironment="HTTP_PROXY=http://proxy.server:port"\nEnvironment="HTTPS_PROXY=http://proxy.server:port"\nEnvironment="NO_PROXY=localhost,127.0.0.1"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("最后")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart docker\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"为docker-build设置代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为docker-build设置代理"}},[s._v("#")]),s._v(" 为docker build设置代理")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker build --build-arg "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("http_proxy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://10.0.75.1:10801 --build-arg "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("https_proxy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://10.0.75.1:10801 /path/to/Dockerfile\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在win上，和上文同理，主机地址是"),t("code",[s._v("10.0.75.1")]),s._v("。")]),s._v(" "),t("h2",{attrs:{id:"为docker-run设置代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为docker-run设置代理"}},[s._v("#")]),s._v(" 为docker run设置代理")]),s._v(" "),t("p",[s._v("在容器里设置即可。")])])}),[],!1,null,null,null);e.default=a.exports}}]);