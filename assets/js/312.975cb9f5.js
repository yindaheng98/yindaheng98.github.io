(window.webpackJsonp=window.webpackJsonp||[]).push([[312],{1004:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"开始之前"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始之前"}},[s._v("#")]),s._v(" 开始之前")]),s._v(" "),t("h3",{attrs:{id:"装系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#装系统"}},[s._v("#")]),s._v(" 装系统")]),s._v(" "),t("p",[s._v("刷入"),t("a",{attrs:{href:"https://ubuntu.com/download/raspberry-pi/thank-you?version=20.04.1&architecture=arm64+raspi",target:"_blank",rel:"noopener noreferrer"}},[s._v("Ubuntu系统"),t("OutboundLink")],1),s._v("，按照"),t("a",{attrs:{href:"https://ubuntu.com/tutorials/how-to-install-ubuntu-on-your-raspberry-pi#1-overview",target:"_blank",rel:"noopener noreferrer"}},[s._v("教程"),t("OutboundLink")],1),s._v("进行基本设置。")]),s._v(" "),t("h3",{attrs:{id:"设置挂载cgroup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置挂载cgroup"}},[s._v("#")]),s._v(" 设置挂载cgroup")]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("/boot")]),s._v("分区中的"),t("code",[s._v("/boot/cmdline.txt")]),s._v("文件开头加上"),t("code",[s._v("cgroup_enable=memory cgroup_memory=1")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"关闭自动更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关闭自动更新"}},[s._v("#")]),s._v(" 关闭自动更新")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" autoremove --purge\ndpkg-reconfigure -plow unattended-upgrades\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"设置wifi"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置wifi"}},[s._v("#")]),s._v(" 设置WiFi")]),s._v(" "),t("p",[s._v("将"),t("code",[s._v("/etc/netplan/50-cloud-init.yaml")]),s._v("修改为这样：")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This file is generated from information provided by the datasource.  Changes")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# to it will not persist across an instance reboot.  To disable cloud-init's")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# network configuration capabilities, write a file")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# network: {config: disabled}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("network")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ethernets")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("eth0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dhcp4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("optional")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("wifis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("wlan0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("dhcp4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("optional")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("access-points")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v('"HUAWEI-PKAWX9_HiLink"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"87654321"')]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v('"yin_Home"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"409987654321"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h2",{attrs:{id:"本文所有操作均在su账户下完成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本文所有操作均在su账户下完成"}},[s._v("#")]),s._v(" 本文所有操作均在"),t("code",[s._v("su")]),s._v("账户下完成")]),s._v(" "),t("h2",{attrs:{id:"安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[s._v("#")]),s._v(" 安装Docker")]),s._v(" "),t("p",[s._v("以下内容摘自"),t("a",{attrs:{href:"https://docs.docker.com/engine/install/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方教程"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    apt-transport-https "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    ca-certificates "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    gnupg-agent "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    software-properties-common\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -fsSL https://download.docker.com/linux/ubuntu/gpg "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -\napt-key fingerprint 0EBFCD88\nadd-apt-repository "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb [arch=arm64] https://download.docker.com/linux/ubuntu \\\n   '),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("lsb_release -cs"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(' \\\n   stable"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y docker-ce docker-ce-cli containerd.io\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h2",{attrs:{id:"编译keadm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译keadm"}},[s._v("#")]),s._v(" 编译"),t("code",[s._v("keadm")])]),s._v(" "),t("h3",{attrs:{id:"安装golang"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装golang"}},[s._v("#")]),s._v(" 安装Golang")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://golang.org/dl/go1.15.2.linux-arm64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -C /usr/local -xzf go1.15.2.linux-arm64.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v(":/usr/local/go/bin\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOPATH")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/go"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装过程中Golang只用一次所以不加到profile中")]),s._v("\ngo version\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"安装make"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装make"}},[s._v("#")]),s._v(" 安装make")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"下载编译kubeedge源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载编译kubeedge源码"}},[s._v("#")]),s._v(" 下载编译KubeEdge源码")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/kubeedge/kubeedge "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GOPATH")]),s._v("/src/github.com/kubeedge/kubeedge\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GOPATH")]),s._v("/src/github.com/kubeedge/kubeedge\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" all "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WHAT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("keadm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"加入集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#加入集群"}},[s._v("#")]),s._v(" 加入集群")]),s._v(" "),t("h3",{attrs:{id:"从云端获取token"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从云端获取token"}},[s._v("#")]),s._v(" 从云端获取token")]),s._v(" "),t("p",[s._v("在运行着"),t("code",[s._v("cloudcore")]),s._v("的云端执行：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("keadm gettoken\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("记录下输出的token字符串。")]),s._v(" "),t("h3",{attrs:{id:"将树莓派加入集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将树莓派加入集群"}},[s._v("#")]),s._v(" 将树莓派加入集群")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GOPATH")]),s._v("/src/github.com/kubeedge/kubeedge/_output/local/bin\n./keadm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" --cloudcore-ipport"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("云端的IP"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("cloudcore端口号，默认为1000"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" --edgenode-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("为这个边缘节点取名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --token"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("从云端获取到的token"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"量产边缘节点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#量产边缘节点"}},[s._v("#")]),s._v(" 量产边缘节点")]),s._v(" "),t("p",[s._v("树莓派安装KubeEdge的关键实际上只是一个"),t("code",[s._v("keadm")]),s._v("程序，因此可以在"),t("code",[s._v("keadm")]),s._v("编译完成后直接放到其他树莓派上使用而不再下载Golang编译源码。")]),s._v(" "),t("h3",{attrs:{id:"构造原型系统"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构造原型系统"}},[s._v("#")]),s._v(" 构造原型系统")]),s._v(" "),t("p",[s._v("从编译安装的系统中取出"),t("code",[s._v("keadm")]),s._v("程序和"),t("code",[s._v("/etc/kubeedge")]),s._v("文件夹，在一个新SD卡中：")]),s._v(" "),t("ol",[t("li",[s._v("刷入经过基本设置的Ubuntu系统")]),s._v(" "),t("li",[s._v("按照前文所述的步骤安装Docker")]),s._v(" "),t("li",[s._v("将"),t("code",[s._v("keadm")]),s._v("上传到"),t("code",[s._v("/bin")])]),s._v(" "),t("li",[s._v("将"),t("code",[s._v("/etc/kubeedge")]),s._v("文件夹上传到"),t("code",[s._v("/etc/kubeedge")])])]),s._v(" "),t("h3",{attrs:{id:"生成镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成镜像"}},[s._v("#")]),s._v(" 生成镜像")]),s._v(" "),t("h4",{attrs:{id:"用读卡器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用读卡器"}},[s._v("#")]),s._v(" 用读卡器")]),s._v(" "),t("p",[s._v("在Linux系统上：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("4M "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("SD卡设备名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" rasp.img.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在Windows系统上：用Win32DiskImager读取即可。")]),s._v(" "),t("h4",{attrs:{id:"基于网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基于网络"}},[s._v("#")]),s._v(" 基于网络")]),s._v(" "),t("p",[s._v("选择一个硬盘容量足够的主机，记录下IP地址，在原型系统上执行：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("4M "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/mmcblk0 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("gzip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("目标主机IP"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cat > rasp.img.gz"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"使用镜像量产边缘节点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用镜像量产边缘节点"}},[s._v("#")]),s._v(" 使用镜像量产边缘节点")]),s._v(" "),t("p",[s._v("对于每个树莓派，将系统镜像刷入SD卡，开机后执行：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("keadm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" --kubeedge-version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v(".0 --cloudcore-ipport"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("云端的IP"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("cloudcore端口号，默认为1000"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" --edgenode-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("为这个边缘节点取名"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --token"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("从云端获取到的token"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("即可完成设置。")]),s._v(" "),t("h3",{attrs:{id:"未完成-设置自动初始化代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#未完成-设置自动初始化代码"}},[s._v("#")]),s._v(" (未完成)设置自动初始化代码")])])}),[],!1,null,null,null);a.default=n.exports}}]);