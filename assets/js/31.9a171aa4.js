(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{582:function(t,s,a){t.exports=a.p+"assets/img/VPxWorkerInterface.b461e48e.png"},583:function(t,s,a){t.exports=a.p+"assets/img/VPxWorker.85be580a.png"},584:function(t,s,a){t.exports=a.p+"assets/img/get_tile_buffers.e9c9cbc0.png"},966:function(t,s,a){"use strict";a.r(s);var n=a(4),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("libvpxä¸­çš„"),n("code",[t._v("decode_tiles")]),t._v("æœ‰ä¸‰ç§ï¼šå¤šçº¿ç¨‹å•è¡Œè§£ç çš„"),n("code",[t._v("decode_tiles_row_wise_mt")]),t._v("ã€å¤šçº¿ç¨‹å¤šè¡Œè§£ç çš„"),n("code",[t._v("decode_tiles_mt")]),t._v("ã€å•çº¿ç¨‹è§£ç çš„"),n("code",[t._v("decode_tiles")]),t._v("ã€‚")]),t._v(" "),n("h2",{attrs:{id:"decode-tiles-mt"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#decode-tiles-mt"}},[t._v("#")]),t._v(" "),n("code",[t._v("decode_tiles_mt")])]),t._v(" "),n("p",[t._v("å…ˆæ¥çœ‹å¤šçº¿ç¨‹å¤šè¡Œè§£ç çš„"),n("code",[t._v("decode_tiles_mt")])]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uint8_t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("decode_tiles_mt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VP9Decoder "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uint8_t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uint8_t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("data_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("å‡½æ•°å¼€å§‹ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  VP9_COMMON "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cm "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("common"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" VPxWorkerInterface "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" winterface "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vpx_get_worker_interface")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("é¦–å…ˆæ˜¯è·å–åˆ°"),n("code",[t._v("VP9_COMMON")]),t._v("å’Œä¸€ä¸ª"),n("code",[t._v("VPxWorkerInterface")]),t._v("ã€‚è¿™ä¸ª"),n("code",[t._v("VP9_COMMON")]),t._v("å·²ç»è§è¿‡å¾ˆå¤šäº†ï¼Œè¿™ä¸ª"),n("code",[t._v("VPxWorkerInterface")]),t._v("é•¿è¿™æ ·ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:a(582),alt:""}})]),t._v(" "),n("p",[t._v("ä»æ³¨é‡Šçœ‹å°±æ˜¯ä¸€ä¸ª"),n("code",[t._v("VPxWorker")]),t._v("çš„æ‰§è¡Œå™¨ï¼Œç”¨äºåœ¨çº¿ç¨‹ä¸­æ‰§è¡Œ"),n("code",[t._v("VPxWorker")]),t._v("ä¸­çš„æ“ä½œã€‚ä»æ³¨é‡Šä¸Šçœ‹ä¸»è¦æ“ä½œæ˜¯"),n("code",[t._v("launch")]),t._v("å’Œ"),n("code",[t._v("execute")]),t._v("é‡Œé¢åœ¨è°ƒç”¨"),n("code",[t._v("VPxWorker")]),t._v("é‡Œé¢çš„"),n("code",[t._v("hook")]),t._v("å‡½æ•°ã€‚è¿™ä¸ª"),n("code",[t._v("VPxWorker")]),t._v("ä¹Ÿå¾ˆç®€å•ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:a(583),alt:""}})]),t._v(" "),n("p",[t._v("æ‰€ä»¥è¿™ä¸ª"),n("code",[t._v("hook")]),t._v("å‡½æ•°åº”è¯¥å°±æ˜¯å¤šçº¿ç¨‹ä¸­æ¯ä¸ªæ“ä½œæ‰€æ‰§è¡Œçš„åœ°æ–¹äº†ã€‚åé¢åº”è¯¥ä¼šæœ‰å¯¹è¿™ä¸€é¡¹èµ‹å€¼å¹¶ä¸”è°ƒç”¨"),n("code",[t._v("VPxWorkerInterface")]),t._v("çš„"),n("code",[t._v("launch")]),t._v("æˆ–è€…"),n("code",[t._v("execute")]),t._v("çš„åœ°æ–¹ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uint8_t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("bit_reader_end "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("åé¢è¦ç”¨çš„çš„ä¸çŸ¥é“ä»€ä¹ˆå˜é‡ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  VP9LfSync "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("lf_row_sync "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_row_sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("ç‚¹è¿›å»çœ‹çœ‹ï¼Œâ€œlfâ€æ˜¯ç¯è·¯æ»¤æ³¢çš„è‹±æ–‡ç¼©å†™ï¼Œè¿™ä¸ªå˜é‡æ˜¯å¤šçº¿ç¨‹ç¯è·¯æ»¤æ³¢ç›¸å…³çš„å˜é‡ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  YV12_BUFFER_CONFIG "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" new_fb "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_frame_new_buffer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("log2_tile_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" tile_rows "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("log2_tile_rows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("è¿™å‡ ä¸ªæ“ä½œåœ¨"),n("RouterLink",{attrs:{to:"/è§†é¢‘ç¼–è§£ç /libvpx-decode.html"}},[t._v("ã€Šlibvpxè§£ç è¿‡ç¨‹è§£è¯»ã€‹")]),t._v("é‡Œé¢å·²ç»è§è¿‡äº†ï¼Œä¸å¿…å¤šè®²ã€‚")],1),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" num_workers "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("VPXMIN")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("max_threads"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("è¿™é‡Œè®¾ç½®äº†ä¸€ä¸‹workeræ•°é‡ã€‚è¿™ä¸ª"),n("code",[t._v("VPXMIN")]),t._v("ç‚¹è¿›å»çœ‹å…¶å®æ˜¯ä¸€ä¸ªæ¯”å¤§å°çš„å®ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯å–æœ€å¤§çº¿ç¨‹æ•°"),n("code",[t._v("max_threads")]),t._v("å’Œåˆ†å—è¡Œçš„æ•°é‡"),n("code",[t._v("tile_cols")]),t._v("ä¸­çš„æœ€å°å€¼ä½œä¸ºçº¿ç¨‹æ•°ï¼Ÿè¿™æ„æ€åº”è¯¥æ˜¯å¤šçº¿ç¨‹å¹¶è¡Œåªæ˜¯åœ¨åŒä¸€è¡Œä¸­çš„æ¯ä¸€åˆ—ä¹‹é—´å¹¶è¡Œï¼Œè€Œè¡Œä¸è¡Œä¹‹é—´æ˜¯ä¸²è¡Œçš„ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_rows "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("tile_rows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[t._v("ä¸€äº›åˆ¤æ–­ã€‚æ€ä¹ˆæœ‰"),n("code",[t._v("assert(tile_rows == 1)")]),t._v("ï¼Ÿè¿™ä¸æ˜¯å¤šè¡Œå¤šçº¿ç¨‹å—")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("init_mt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("åˆå§‹åŒ–å¤šçº¿ç¨‹ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Reset tile decoding hook")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" num_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    VPxWorker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" worker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    TileWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tile_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_worker_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("total_tiles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sync")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lpf_mt_opt "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter_level "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("skip_loop_filter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_sync "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lf_row_sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_sync"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lfdata"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_loop_filter_data_reset")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" new_fb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("y_only "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counts "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n        cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("frame_parallel_decoding_mode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("counts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    worker"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("hook "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tile_worker_hook"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    worker"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("data1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tile_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    worker"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("data2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br")])]),n("p",[t._v("ç»ˆäºçœ‹è§å‰é¢è¯´çš„ç»™"),n("code",[t._v("hook")]),t._v("èµ‹å€¼çš„åœ°æ–¹äº†ï¼è¿™é‡Œæ˜¯ä¸€ä¸ªå¾ªç¯ç»™æ¯ä¸ª"),n("code",[t._v("pbi->tile_workers")]),t._v("ä¸­çš„æ¯ä¸ªworkerå’Œ"),n("code",[t._v("pbi->row_mt_worker_data->thread_data")]),t._v("ä¸­çš„æ¯ä¸ªworkerè¦ç”¨çš„æ•°æ®èµ‹å€¼ã€‚æ‰€ä»¥å¾ˆæ˜æ˜¾è¿™ä¸ª"),n("code",[t._v("tile_worker_hook")]),t._v("å°±æ˜¯å¤šçº¿ç¨‹è§£ç tile1çš„æ ¸å¿ƒå‡½æ•°ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Load tile data into tile_buffers")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_tile_buffers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_rows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("ä¸€ä¸ª"),n("code",[t._v("get_tile_buffers")]),t._v("æŠŠ"),n("code",[t._v("data")]),t._v("é‡Œçš„tileæ•°æ®åŠ è½½åˆ°"),n("code",[t._v("pbi->tile_buffers")]),t._v("é‡Œï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:a(584),alt:""}})]),t._v(" "),n("p",[t._v("ç¬‘äº†ğŸ˜‚ï¼Œå°±æ˜¯ä¸€è¡Œä¸€è¡Œä¸€åˆ—ä¸€åˆ—çš„æ‹·è´ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Sort the buffers based on size in descending order.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("qsort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        compare_tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("æ’äº†ä¸ªåºï¼Ÿå¯èƒ½æ˜¯æ’åºäº†å¤šçº¿ç¨‹å¯ä»¥ç®—çš„æ›´å¿«ï¼Ÿ")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num_workers "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" tile_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Rearrange the tile buffers such that the largest, and")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// presumably the most difficult, tile will be decoded in the main thread.")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This should help minimize the number of instances where the main thread")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// is waiting for a worker to complete.")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" TileBuffer largest "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("memmove")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" largest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" end "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    TileBuffer tmp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Interleave the tiles to distribute the load between threads, assuming a")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// larger tile implies it is more difficult to decode.")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      tmp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("start"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("start"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tmp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      end "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br")])]),n("p",[t._v("è¿™åº”è¯¥æ˜¯æŠŠå—çš„ä»»åŠ¡åˆ†ç»™æ¯ä¸ªçº¿ç¨‹å§ã€‚ä¸Šé¢çš„"),n("code",[t._v("num_workers == tile_cols")]),t._v("çš„æƒ…å†µå¯ä»¥ä¸€ä¸ªçº¿ç¨‹ä¸€ä¸ªä»»åŠ¡ï¼Œä¸è¿™æ ·å°±å¾—æœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œå¤šä¸ªä»»åŠ¡ï¼ˆå‰é¢çš„æ’åºåº”è¯¥ä¹Ÿæ˜¯ä¸ºäº†è¿™ä¸ªï¼Ÿå¤§ä»»åŠ¡å°½é‡å’Œå°ä»»åŠ¡ä¸€èµ·äº¤ç»™ä¸€ä¸ªçº¿ç¨‹ï¼Œå°½å¯èƒ½ä¿è¯å¤„ç†æ—¶é—´å‡è¡¡ï¼Œæ•ˆç‡æœ€é«˜ï¼‰ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Initialize thread frame counts.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("frame_parallel_decoding_mode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" num_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      TileWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tile_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TileWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_zero")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("counts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("p",[t._v("åˆå§‹åŒ–çº¿ç¨‹å¸§è®¡æ•°ï¼Ÿ")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" base "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" num_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" remain "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" num_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" buf_start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" num_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" count "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" base "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("remain "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" num_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      VPxWorker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" worker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      TileWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tile_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TileWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("worker"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("data1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("buf_start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" buf_start"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("buf_end "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" buf_start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" count "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("data_end "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      buf_start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      worker"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("had_error "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" num_workers "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("buf_end "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("launch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      VPxWorker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" worker "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      TileWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tile_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TileWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("worker"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("data1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO(jzern): The tile may have specific error data associated with")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// its vpx_internal_error_info which could be propagated to the main info")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in cm. Additionally once the threads have been synced and an error is")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// detected, there's no point in continuing to decode tiles.")]),t._v("\n      pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("corrupted "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sync")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("bit_reader_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" bit_reader_end "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("data_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br")])]),n("p",[t._v("å¼€å§‹æ‰§è¡Œäº†ï¼å…¶å®å°±æ˜¯forå¾ªç¯ç”¨"),n("code",[t._v("winterface->execute")]),t._v("å¼‚æ­¥å¯åŠ¨æ¯ä¸€ä¸ªworkerï¼Œæœ€åä¸€ä¸ªworkerç”¨"),n("code",[t._v("winterface->launch")]),t._v("åŒæ­¥å¯åŠ¨ï¼›æ‰§è¡Œå®Œæ¯•åå†ç”¨forå¾ªç¯æ‰§è¡Œ"),n("code",[t._v("winterface->sync")]),t._v("ç­‰å¾…æ‰€æœ‰workerå®Œæˆï¼Œå¹¶ä¸”æœ€åè¿˜ç”¨"),n("code",[t._v("pbi->mb.corrupted")]),t._v("å’Œ"),n("code",[t._v("bit_reader_end")]),t._v("è®°ä¸‹äº†è¿”å›å€¼ã€‚")]),t._v(" "),n("p",[t._v("å¾ˆå¥½ç†è§£ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Accumulate thread frame counts.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("frame_parallel_decoding_mode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" num_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      TileWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tile_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TileWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_workers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_accumulate_frame_counts")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("counts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("counts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("p",[t._v("å¢é•¿çº¿ç¨‹å¸§è®¡æ•°ï¼Ÿ")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bit_reader_end "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("corrupted"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" bit_reader_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("æœ€ååˆ¤æ–­ä¸€ä¸‹å‰é¢è®°ä¸‹çš„è¿”å›å€¼"),n("code",[t._v("pbi->mb.corrupted")]),t._v("å’Œ"),n("code",[t._v("bit_reader_end")]),t._v("æ˜¯å¦æ­£å¸¸ï¼Œç„¶åé€€å‡ºã€‚")]),t._v(" "),n("h2",{attrs:{id:"decode-tiles"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#decode-tiles"}},[t._v("#")]),t._v(" "),n("code",[t._v("decode_tiles")])]),t._v(" "),n("p",[t._v("å†æ¥çœ‹å•çº¿ç¨‹è§£ç çš„"),n("code",[t._v("decode_tiles")])]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uint8_t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("decode_tiles")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VP9Decoder "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uint8_t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uint8_t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("data_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  VP9_COMMON "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cm "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("common"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" VPxWorkerInterface "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" winterface "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vpx_get_worker_interface")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" aligned_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mi_cols_aligned_to_sb")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mi_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("log2_tile_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" tile_rows "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("log2_tile_rows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("p",[t._v("åˆå§‹åŒ–çš„æ–¹å¼å’Œ"),n("code",[t._v("decode_tiles_mt")]),t._v("é‡Œé¢å·®ä¸å¤šã€‚ä½†æ˜¯è¿™é‡Œå¤šä¸€ä¸ª"),n("code",[t._v("aligned_cols")]),t._v("ï¼Œä»åé¢çš„ä»£ç çœ‹åº”è¯¥æ˜¯å’Œbufferå¤§å°æœ‰å…³çš„é‡ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  TileBuffer tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" tile_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" mi_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mi_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  TileWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("tile_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[n("code",[t._v("TileBuffer")]),t._v("ç›´æ¥åœ¨è¿™åˆå§‹åŒ–äº†ï¼Œ"),n("code",[t._v("TileWorkerData")]),t._v("ä¹Ÿåªæœ‰ä¸€ä¸ªä¸åƒ"),n("code",[t._v("decode_tiles_mt")]),t._v("é‡Œé¢æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª"),n("code",[t._v("TileWorkerData")]),t._v("ï¼Œæœç„¶æ˜¯å•çº¿ç¨‹ï¼Œå¾ˆåˆç†ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter_level "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("skip_loop_filter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n      pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("CHECK_MEM_ERROR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vpx_memalign")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LFWorkerData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hook "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vp9_loop_filter_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("max_threads "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("reset")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vpx_internal_error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" VPX_CODEC_ERROR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                         "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Loop filter thread creation failed"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("p",[t._v("ä»"),n("RouterLink",{attrs:{to:"/è§†é¢‘ç¼–è§£ç /libvpx-decode.html"}},[t._v("ã€Šlibvpxè§£ç è¿‡ç¨‹è§£è¯»ã€‹")]),t._v("é‡Œå·²ç»çŸ¥é“ï¼Œå¤šçº¿ç¨‹"),n("code",[t._v("decode_tiles_mt")]),t._v("çš„æƒ…å†µä¸‹ç¯è·¯æ»¤æ³¢çš„è¿‡ç¨‹æ˜¯åœ¨å¤–é¢è°ƒç”¨çš„ï¼Œ"),n("code",[t._v("decode_tiles_row_wise_mt")]),t._v("å’Œå•çº¿ç¨‹çš„"),n("code",[t._v("decode_tiles")]),t._v("é‡Œé¢è‡ªå¸¦ç¯è·¯æ»¤æ³¢ã€‚\nè¿™é‡Œå°±æ˜¯ç»™ç¯è·¯æ»¤æ³¢åˆ†é…æ•°æ®ï¼Œå¹¶ä¸”"),n("code",[t._v("pbi->lf_worker.hook = vp9_loop_filter_worker")]),t._v("ç»™ç¯è·¯æ»¤æ³¢çš„hookèµ‹äº†å€¼ã€‚")],1),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter_level "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("skip_loop_filter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    LFWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" lf_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LFWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Be sure to sync as we might be resuming after a failed frame decode.")]),t._v("\n    winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sync")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_loop_filter_data_reset")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lf_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_frame_new_buffer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                               pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("p",[t._v("ä»æ³¨é‡Šä¸Šçœ‹åº”è¯¥æ˜¯ç¡®ä¿ç¯è·¯æ»¤æ³¢çš„hookå·²ç»æ­£ç¡®é€€å‡ºã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_rows "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("assert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("ä¸¤ä¸ªåˆ¤æ–­ï¼Œè¿™é‡Œæ€ä¹ˆæ˜¯"),n("code",[t._v("assert(tile_rows <= 4)")]),t._v("ï¼Œå¤šçº¿ç¨‹"),n("code",[t._v("decode_tiles_mt")]),t._v("é‚£é‡Œå´æ˜¯"),n("code",[t._v("assert(tile_rows == 1)")]),t._v("ï¼Ÿæ€ª")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Note: this memset assumes above_context[0], [1] and [2]")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// are allocated as part of the same buffer.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("memset")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("above_context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("above_context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" MAX_MB_PLANE "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" aligned_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("memset")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("above_seg_context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sizeof")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("above_seg_context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" aligned_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_reset_lfm")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("p",[t._v("é‡ç½®äº†ä¸€äº›å†…å­˜ç©ºé—´ã€‚")]),t._v(" "),n("p",[t._v("è¿™é‡Œçš„contextåº”è¯¥æ˜¯æ˜¯æŒ‡ç†µè§£ç contextï¼Œlfmåº”è¯¥æ˜¯æŒ‡ç”¨äºç¯è·¯æ»¤æ³¢çš„å†…å­˜ç©ºé—´ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_tile_buffers")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_rows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("å’Œ"),n("code",[t._v("decode_tiles_mt")]),t._v("é‡Œä¸€æ ·ï¼Œä¸€ä¸ª"),n("code",[t._v("get_tile_buffers")]),t._v("æŠŠ"),n("code",[t._v("data")]),t._v("é‡Œçš„tileæ•°æ®åŠ è½½åˆ°bufferé‡Œã€‚åªä¸è¿‡å‰é¢çš„å¤šçº¿ç¨‹æ˜¯åŠ è½½åˆ°"),n("code",[t._v("pbi->tile_buffers")]),t._v("é‡Œï¼Œè¿™é‡Œç›´æ¥æ˜¯åŠ è½½åˆ°å‡½æ•°å¼€å¤´å®šä¹‰çš„"),n("code",[t._v("tile_buffers")]),t._v("é‡Œ")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Load all tile information into tile_data.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" tile_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" tile_rows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("tile_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_col "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" tile_col "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" tile_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("tile_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" TileBuffer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" buf "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("tile_buffers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("tile_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("tile_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      tile_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_worker_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" tile_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" tile_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("corrupted "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counts "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n          cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("frame_parallel_decoding_mode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("counts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_zero")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("dqcoeff"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_tile_init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup_token_decoder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" buf"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("size"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                          "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("bit_reader"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("decrypt_cb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                          pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("decrypt_state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_init_macroblockd")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("dqcoeff"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br")])]),n("p",[t._v("è¿™ä¸ªæ“ä½œå¯¹åº”çš„æ˜¯"),n("code",[t._v("decode_tiles_mt")]),t._v("é‡Œçš„æ’åºä¹‹ååˆ†é…ä»»åŠ¡çš„æ“ä½œã€‚ä»å‰é¢"),n("code",[t._v("decode_tiles_mt")]),t._v("é‡Œå¯ä»¥çœ‹åˆ°ï¼Œåˆ†é…ä»»åŠ¡æœ¬è´¨ä¸Šå°±æ˜¯ç»™æ¯ä¸ªçº¿ç¨‹ä¸“ç”¨çš„bufferé‡Œé¢æ”¾ä¸Šæ•°æ®ã€‚è¿™é‡Œæ˜¯å•çº¿ç¨‹ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦ä»€ä¹ˆæ’åºï¼Œç›´æ¥æ— è„‘æ‹·è´å°±è¡Œäº†ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" tile_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" tile_rows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("tile_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    TileInfo tile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_tile_set_row")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("tile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tile_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mi_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mi_row_start"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" mi_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" tile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mi_row_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n         mi_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" MI_BLOCK_SIZE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_col "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" tile_col "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" tile_cols"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("tile_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" col "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n            pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("inv_tile_order "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" tile_col "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" tile_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        tile_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_worker_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" tile_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_tile_set_col")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("tile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_zero")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("left_context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vp9_zero")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("left_seg_context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mi_col "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mi_col_start"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" mi_col "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" tile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mi_col_end"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n             mi_col "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" MI_BLOCK_SIZE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("row_mt "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            RowMTWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" row_mt_worker_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("row_mt_worker_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("plane "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" plane "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" MAX_MB_PLANE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eob "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" row_mt_worker_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("eob"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dqcoeff "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n                  row_mt_worker_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("dqcoeff"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("partition "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" row_mt_worker_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("partition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("process_partition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mi_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mi_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" BLOCK_64X64"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                              PARSE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" parse_block"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("plane "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" plane "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" MAX_MB_PLANE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eob "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" row_mt_worker_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("eob"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dqcoeff "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n                  row_mt_worker_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("dqcoeff"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plane"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("partition "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" row_mt_worker_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("partition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("process_partition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mi_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mi_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" BLOCK_64X64"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                              RECON"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" recon_block"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("decode_partition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mi_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mi_col"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" BLOCK_64X64"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("corrupted "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|=")]),t._v(" tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("xd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("corrupted"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("corrupted"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vpx_internal_error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" VPX_CODEC_CORRUPT_FRAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                             "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Failed to decode tile data"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Loopfilter one row.")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter_level "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("skip_loop_filter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" lf_start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mi_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" MI_BLOCK_SIZE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        LFWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" lf_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LFWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// delay the loopfilter by 1 macroblock row.")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lf_start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("continue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// decoding has completed: finish up the loop filter in this thread.")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mi_row "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" MI_BLOCK_SIZE "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mi_rows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("continue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sync")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        lf_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lf_start"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        lf_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("stop "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mi_row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("max_threads "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("launch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br")])]),n("p",[t._v("è¿™å°±æ˜¯ä¸»è¦çš„å¤„ç†æ“ä½œäº†ã€‚è¿™ä¸€çœ‹å°±æ˜¯å‡ ä¸ªforå¾ªç¯ä¸€è¡Œä¸€è¡Œä¸€åˆ—ä¸€åˆ—åœ°åœ¨å¤„ç†æ•°æ®ã€‚åˆ°è¿™é‡Œéƒ½æ²¡æœ‰"),n("code",[t._v("decode_tiles_mt")]),t._v("é‡Œçœ‹åˆ°çš„"),n("code",[t._v("tile_worker_hook")]),t._v("å‡ºåœºï¼Œè¯´æ˜"),n("code",[t._v("tile_worker_hook")]),t._v("è‚¯å®šæ˜¯è¢«åˆ†è§£äº†æ”¾åœ¨è¿™ä¸ªå¾ªç¯é‡Œé¢äº†ï¼Œæ‰€ä»¥è¿™å¾ªç¯é‡Œé¢çš„æ“ä½œåº”è¯¥å’Œæˆ‘ä»¬ä¹‹åè¦ç ”ç©¶çš„"),n("code",[t._v("tile_worker_hook")]),t._v("é‡Œçš„æ“ä½œå¤§å·®ä¸ç¦»ã€‚")]),t._v(" "),n("p",[t._v("å†ä»”ç»†çœ‹çœ‹ï¼Œé™¤äº†ä¸€å †èµ‹å€¼çš„æ“ä½œå’Œæœ€åæ˜æ˜¾æ˜¯æ‰§è¡Œç¯è·¯æ»¤æ³¢çš„æ“ä½œä¹‹å¤–ï¼Œå°±åªæœ‰"),n("code",[t._v("pbi->row_mt == 1")]),t._v("æ—¶æœ€åè°ƒç”¨çš„"),n("code",[t._v("process_partition")]),t._v("è¿˜æœ‰elseæ—¶è°ƒç”¨çš„"),n("code",[t._v("decode_partition")]),t._v("äº†ï¼Œè¿™ä¸¤ä¸ªæ“ä½œåº”è¯¥å°±æ˜¯æ›´åº•å±‚çš„è§£ç å‡½æ•°ï¼Œ"),n("code",[t._v("tile_worker_hook")]),t._v("é‡Œè°ƒç”¨çš„åº”è¯¥ä¹Ÿæ˜¯è¿™ä¸¤ä¸ªã€‚å¹¶ä¸”ä»å®ƒä»¬çš„æ‰§è¡Œæ¡ä»¶çœ‹ï¼Œ"),n("code",[t._v("process_partition")]),t._v("æ˜¯"),n("code",[t._v("pbi->row_mt == 1")]),t._v("æ—¶è°ƒç”¨çš„ï¼Œé‚£"),n("code",[t._v("decode_partition")]),t._v("ä¼°è®¡ä¹Ÿå°±æ˜¯é€šè¿‡å¤šæ¬¡è°ƒç”¨"),n("code",[t._v("process_partition")]),t._v("å®ç°çš„ã€‚")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Loopfilter remaining rows in the frame.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter_level "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("skip_loop_filter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    LFWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" lf_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LFWorkerData "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sync")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    lf_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("start "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lf_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("stop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    lf_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("stop "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("mi_rows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    winterface"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("lf_worker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Get last tile data.")]),t._v("\n  tile_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pbi"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("tile_worker_data "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" tile_cols "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" tile_rows "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("çœ‹æ¥æ˜¯ä¸Šé¢çš„å¾ªç¯é‡Œé¢ä¸ä¸€å®šèƒ½å®Œæˆå…¨éƒ¨çš„ç¯è·¯æ»¤æ³¢ï¼Ÿ")]),t._v(" "),n("div",{staticClass:"language-c line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vpx_reader_find_end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("tile_data"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("bit_reader"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("æœ€åæ˜¯è¯»å®Œç»ˆæ­¢æ•°æ®åç»“æŸã€‚")]),t._v(" "),n("p",[t._v("æ€»ç»“ä¸€ä¸‹ï¼Œå¤šçº¿ç¨‹è§£ç åº•å±‚æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯åœ¨è°ƒç”¨"),n("code",[t._v("tile_worker_hook")]),t._v("ï¼Œè€Œä»è¿™ä¸ªå‡½æ•°çœ‹ï¼Œæ›´åº•å±‚çš„é™¤äº†å‡½æ•°åº”è¯¥å°±æ˜¯"),n("code",[t._v("process_partition")]),t._v("å’Œ"),n("code",[t._v("decode_partition")]),t._v("ï¼Œ"),n("code",[t._v("tile_worker_hook")]),t._v("åº”è¯¥ä¹Ÿæ˜¯è°ƒç”¨çš„"),n("code",[t._v("process_partition")]),t._v("å’Œ"),n("code",[t._v("decode_partition")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("æ¥ä¸‹æ¥ç»§ç»­çœ‹"),n("code",[t._v("decode_partition")]),t._v("ï¼š"),n("RouterLink",{attrs:{to:"/è§†é¢‘ç¼–è§£ç /libvpx-decode-partition.html"}},[t._v("ã€Šlibvpxä¸­çš„"),n("code",[t._v("decode_partition")]),t._v("ã€‹")]),t._v("ã€‚")],1)])}),[],!1,null,null,null);s.default=e.exports}}]);