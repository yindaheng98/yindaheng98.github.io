(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{728:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"å‘è¿›ç¨‹å‘é€åœæ­¢ä¿¡å·"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‘è¿›ç¨‹å‘é€åœæ­¢ä¿¡å·"}},[s._v("#")]),s._v(" å‘è¿›ç¨‹å‘é€åœæ­¢ä¿¡å·")]),s._v(" "),t("p",[s._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œdockerå®¹å™¨åœ¨åœæ­¢æ—¶ä¼šå‘å®¹å™¨å†…çš„1å·è¿›ç¨‹å‘é€"),t("code",[s._v("SIGTERM")]),s._v("ä¿¡å·å‘ŠçŸ¥åº”ç”¨åœæ­¢ã€‚")]),s._v(" "),t("p",[s._v("åœ¨å‘½ä»¤è¡Œè¿è¡Œdockerå®¹å™¨æ—¶ï¼Œåœ¨å®¹å™¨stdoutè¾“å‡ºç•Œé¢ï¼ˆ"),t("code",[s._v("docker run")]),s._v("ä¸åŠ "),t("code",[s._v("-d")]),s._v("ï¼‰ä¸­Ctrl+Cå°±æ˜¯å‘1å·è¿›ç¨‹å‘é€"),t("code",[s._v("SIGTERM")]),s._v("ä¿¡å·ï¼Œç„¶åé€€å‡ºå®¹å™¨çš„stdoutï¼ˆç¦»å¼€å®¹å™¨çš„stdoutå›ä¸»æœºå‘½ä»¤è¡Œï¼‰ï¼Œæ­¤æ—¶å®¹å™¨å¯èƒ½æ²¡æœ‰å®Œå…¨é€€å‡ºï¼Œç»§ç»­åœ¨åå°è¿è¡Œï¼Œç”¨"),t("code",[s._v("docker ps")]),s._v("å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§å®¹å™¨å°±è¦è°ƒç”¨"),t("code",[s._v("docker stop")]),s._v("æ‰èƒ½å®Œå…¨åœæ­¢ã€‚"),t("code",[s._v("docker stop")]),s._v("æ˜¯ä¸ç®¡å®¹å™¨å†…çš„è¿›ç¨‹çŠ¶æ€å¦‚ä½•éƒ½ç›´æ¥å¼ºè¡Œé€€å‡ºã€‚")]),s._v(" "),t("p",[s._v("ç”¨docker-composeè¿è¡Œå®¹å™¨æ—¶ï¼Œåœ¨stdoutè¾“å‡ºç•Œé¢æŒ‰Ctrl+Cæˆ–è€…ç”¨"),t("code",[s._v("docker-compose down")]),s._v("å°±æ˜¯å‘1å·è¿›ç¨‹å‘é€"),t("code",[s._v("SIGTERM")]),s._v("ä¿¡å·ï¼Œè¿™æ—¶docker-composeä¼šç­‰å¾…å®¹å™¨è‡ªå·±é€€å‡ºï¼Œå¹¶ä¸”ä¸‹é¢ä¼šæ˜¾ç¤ºâ€œæŒ‰Ctrl+Cå¼ºåˆ¶é€€å‡ºâ€ä¹‹ç±»çš„è¯ï¼Œè¿™æ—¶å†æŒ‰Ctrl+Cå°±æ˜¯å’Œ"),t("code",[s._v("docker stop")]),s._v("ä¸€æ ·çš„æ•ˆæœã€‚")]),s._v(" "),t("p",[t("code",[s._v("SIGTERM")]),s._v("ä¿¡å·ç›¸å½“äºæ˜¯"),t("code",[s._v("kill <PID>")]),s._v("æŒ‡ä»¤ï¼Œä½†æ˜¯æœ‰äº›ç¨‹åºè¢«è®¾ç½®æˆè¦æ¥æ”¶"),t("code",[s._v("SIGINT")]),s._v("ä¿¡å·æ‰é€€å‡ºï¼ˆ"),t("code",[s._v("SIGINT")]),s._v("ä¿¡å·å°±ç›¸å½“äºåœ¨å‘½ä»¤è¡ŒCtrl-Cï¼‰ã€‚è¿™æ—¶å°±è¦åœ¨Dockerfileé‡Œé¢è®¾ç½®å®¹å™¨çš„åœæ­¢æŒ‡ä»¤ï¼š")]),s._v(" "),t("div",{staticClass:"language-dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("STOPSIGNAL")]),s._v(" SIGINT\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿™æ ·ï¼Œå®¹å™¨é€€å‡ºæ—¶å‘1å·è¿›ç¨‹å‘é€çš„ä¿¡å·å°±ä¸æ˜¯"),t("code",[s._v("SIGTERM")]),s._v("è€Œæ˜¯"),t("code",[s._v("SIGINT")]),s._v("äº†ã€‚")]),s._v(" "),t("h2",{attrs:{id:"å¤šé˜¶æ®µæ„å»º-multi-stage-builds"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¤šé˜¶æ®µæ„å»º-multi-stage-builds"}},[s._v("#")]),s._v(" å¤šé˜¶æ®µæ„å»º - multi-stage builds")]),s._v(" "),t("p",[s._v("åœ¨ä»æºç å¼€å§‹çš„é•œåƒæ„å»ºæ—¶ç»å¸¸é‡åˆ°ä¸€ç§æƒ…å†µï¼šæºç çš„ç¼–è¯‘éœ€è¦"),t("strong",[s._v("ä¸€ä¸ªè¶…å¤§çš„ç¼–è¯‘ç”¨é•œåƒ")]),s._v("ï¼Œè€Œç¼–è¯‘å®Œæˆä¹‹åå°±åªéœ€è¦"),t("strong",[s._v("ä¸€ä¸ªåŸºç¡€çš„æ“ä½œç³»ç»Ÿé•œåƒå°±èƒ½è¿è¡Œ")]),s._v("ã€‚ä»¥æœ€å…¸å‹çš„goè¯­è¨€ä¸ºä¾‹ï¼Œç¼–è¯‘æ—¶éœ€è¦ç”¨"),t("code",[s._v("golang")]),s._v("é•œåƒï¼Œå¹¶ä¸”è¿˜è¦ä¸‹ä¸€å †goåº“ï¼Œä½†æ˜¯ç¼–è¯‘å®Œæˆä¹‹åå°±åªç”¨æŠŠå¯æ‰§è¡Œæ–‡ä»¶æ‹¿åˆ°ä¸€ä¸ªå•¥è½¯ä»¶éƒ½æ²¡æœ‰çš„åŸºç¡€é•œåƒé‡Œé¢å°±èƒ½è¿è¡Œã€‚")]),s._v(" "),t("p",[s._v("åœ¨å¤šé˜¶æ®µæ„å»ºå‡ºç°ä¹‹å‰ï¼Œåƒgolangå’ŒCè¿™ç±»é™æ€ç¼–ç¨‹è¯­è¨€ç”¨åœ¨Dockeré‡Œé¢è‡³å°‘éœ€è¦ä¸¤ä¸ªé•œåƒï¼Œä¸€ä¸ªç”¨æ¥æ„å»ºï¼Œä¸€ä¸ªç”¨æ¥è¿è¡Œï¼Œæ„å»ºç”¨çš„é•œåƒé€šå¸¸å¾ˆå¤§ï¼Œè¿è¡Œç”¨çš„é•œåƒå°±å¾ˆå°ã€‚è¿™ç§ææ³•å°±è‡³å°‘è¦å†™ä¸¤ä¸ªDockerfileï¼Œå¾ˆä¸æ–¹ä¾¿ï¼Œä¸å¤Ÿç®€æ´ã€‚")]),s._v(" "),t("p",[s._v("å¤šé˜¶æ®µæ„å»ºå°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜å­˜åœ¨çš„ã€‚")]),s._v(" "),t("p",[s._v("å¤šé˜¶æ®µæ„å»ºä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶åŒæ—¶ç¼–è¯‘å¤šä¸ªé•œåƒï¼Œä¸åŒçš„é•œåƒè¿›è¡Œä¸åŒçš„æ“ä½œï¼Œæœ€åæ±‡æ€»åˆ°ä¸€ä¸ªé•œåƒä¸­ã€‚å…¶ç”¨æ³•éå¸¸ç®€å•ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("æŠŠç¼–è¯‘é•œåƒå’Œè¿è¡Œé•œåƒçš„Dockerfileåˆå¹¶å†™å…¥ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæœ€ç»ˆè¦ç”Ÿæˆçš„è¿è¡Œé•œåƒæ”¾åœ¨æœ€ä¸‹é¢")]),s._v(" "),t("li",[s._v("æŠŠè¿è¡Œé•œåƒDockerfileé‡Œé¢åŸæœ‰çš„å¤åˆ¶å¯æ‰§è¡Œæ–‡ä»¶çš„æŒ‡ä»¤åŠ ä¸Š"),t("code",[s._v("--from")]),s._v("å‚æ•°ï¼Œä½¿ä¹‹ä»ç¼–è¯‘é•œåƒä¸­å¤åˆ¶æ–‡ä»¶")])]),s._v(" "),t("h3",{attrs:{id:"ç¤ºä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹"}},[s._v("#")]),s._v(" ç¤ºä¾‹")]),s._v(" "),t("h4",{attrs:{id:"ä¸ä½¿ç”¨å¤šé˜¶æ®µæ„å»º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ä½¿ç”¨å¤šé˜¶æ®µæ„å»º"}},[s._v("#")]),s._v(" ä¸ä½¿ç”¨å¤šé˜¶æ®µæ„å»º")]),s._v(" "),t("p",[s._v("æ„å»ºç”¨é•œåƒï¼š")]),s._v(" "),t("div",{staticClass:"language-Dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" golang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("alpine\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /go/src\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" apk "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("update add git && \\\n    go get "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v github.com/kataras/iris && \\\n    go get "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v github.com/go"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("driver/mysql && \\\n    go get "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v github.com/gocql/gocql && \\\n    go get "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v github.com/garyburd/redigo/redis && \\\n    go get "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v gopkg.in/yaml.v3\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" mkdir /app\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /app\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VOLUME")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/app"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("æ„å»ºæŒ‡ä»¤ï¼š")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("docker run -it --rm -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(':/app"')]),s._v(" yindaheng98/go-iris go build -v -o /app/UserAuth\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿è¡Œç”¨é•œåƒï¼š")]),s._v(" "),t("div",{staticClass:"language-Dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" alpine\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" mkdir /Config\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" UserAuth /\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" chmod u+x /UserAuth\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" Config /Config\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 8080\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VOLUME")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Config"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/UserAuth"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"ä½¿ç”¨å¤šé˜¶æ®µæ„å»º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨å¤šé˜¶æ®µæ„å»º"}},[s._v("#")]),s._v(" ä½¿ç”¨å¤šé˜¶æ®µæ„å»º")]),s._v(" "),t("div",{staticClass:"language-Dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" golang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("alpine AS builder\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /go/src\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" apk "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("update add git && \\\n    go get "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v github.com/kataras/iris && \\\n    go get "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v github.com/go"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("driver/mysql && \\\n    go get "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v github.com/gocql/gocql && \\\n    go get "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v github.com/garyburd/redigo/redis && \\\n    go get "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("d "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v gopkg.in/yaml.v3\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" ./ /app\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /app\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" go build "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("v "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("o /UserAuth\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" alpine\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" mkdir /Config\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("from=builder /UserAuth /\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" chmod u+x /UserAuth\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" Config /Config\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 8080\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" /\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VOLUME")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Config"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/UserAuth"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("h2",{attrs:{id:"å¥‡æ€ªçš„é”™è¯¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¥‡æ€ªçš„é”™è¯¯"}},[s._v("#")]),s._v(" å¥‡æ€ªçš„é”™è¯¯")]),s._v(" "),t("p",[s._v("å½“å‰æ–‡ä»¶å¤¹ä¸‹å­˜åœ¨"),t("code",[s._v("etc")]),s._v("ã€"),t("code",[s._v("/etc/glusterfs")]),s._v("ã€"),t("code",[s._v("etc-etc")]),s._v("ã€"),t("code",[s._v("etc-etc/etc")])]),s._v(" "),t("p",[s._v("ä¸‹é¢è¿™ä¸ªæŒ‡ä»¤æ²¡æœ‰é—®é¢˜ğŸ‘‡")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("docker run --rm -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./etc:/etc/glusterfs"')]),s._v(" gluster/gluster-centos\ndocker run --rm -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./etc/glusterfs:/etc/glusterfs"')]),s._v(" gluster/gluster-centos\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("ä¸‹é¢è¿™ä¸ªå°±æœ‰é—®é¢˜ğŸ‘‡")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("docker run --rm -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./etc/glusterfs:/etc/glusterfs"')]),s._v(" gluster/gluster-centos\ndocker run --rm -v "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./etc-etc:/etc/glusterfs"')]),s._v(" gluster/gluster-centos\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("æŠ¥è¿™ç§é”™ğŸ‘‡")]),s._v(" "),t("div",{staticClass:"language-log line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('C:\\Program Files\\Docker\\Docker\\Resources\\bin\\docker.exe: Error response from daemon: create etc/glusterfs: "etc/glusterfs" includes invalid characters for a local volume name, only "[a-zA-Z0-9][a-zA-Z0-9_.-]" are allowed. If you intended to pass a host directory, use absolute path.\nSee \'C:\\Program Files\\Docker\\Docker\\Resources\\bin\\docker.exe run --help\'.\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("è¿™ä¹ˆè¯´Dockeråªèƒ½æŒ‚è½½ä¸€å±‚ç›¸å¯¹ç›®å½•ï¼Ÿï¼Ÿï¼Ÿåœ¨docker-compose.ymlé‡Œé¢å°±æ²¡è¿™é—®é¢˜ã€‚")]),s._v(" "),t("h2",{attrs:{id:"dockerfileçš„cmdå’Œshellè„šæœ¬"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfileçš„cmdå’Œshellè„šæœ¬"}},[s._v("#")]),s._v(" Dockerfileçš„CMDå’ŒShellè„šæœ¬")]),s._v(" "),t("ol",[t("li",[s._v("Shellè„šæœ¬å¼€å¤´æœ€å¥½åŠ "),t("code",[s._v("#! /bin/bash")]),s._v("ä»¥å…æŠ¥é”™")]),s._v(" "),t("li",[s._v("ä¸‹é¢è¿™ä¸¤ä¸ªCMDæ•ˆæœæ˜¯ä¸ä¸€æ ·çš„ğŸ‘‡")])]),s._v(" "),t("div",{staticClass:"language-Dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start.sh"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿™ä¸ªæ­£å¸¸ğŸ‘†")]),s._v(" "),t("div",{staticClass:"language-Dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start.sh"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿™ä¸ªä¼šè®©å®¹å™¨å¯åŠ¨æ—¶ç›´æ¥"),t("code",[s._v("exit 0")]),s._v("ã€‚åŸå› ï¼Ÿä¸å¤ªæ‡‚ã€‚")]),s._v(" "),t("h2",{attrs:{id:"åœ¨dockerfileçš„cmdé‡Œå†™å˜é‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨dockerfileçš„cmdé‡Œå†™å˜é‡"}},[s._v("#")]),s._v(" åœ¨Dockerfileçš„CMDé‡Œå†™å˜é‡")]),s._v(" "),t("p",[s._v("è¿™æ ·å†™CMDçš„ç»“æœæ˜¯ä»€ä¹ˆï¼ŸğŸ‘‡")]),s._v(" "),t("div",{staticClass:"language-Dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" alpine\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" SOME_PATH /some/path\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${SOME_PATH}"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("ä¼š"),t("code",[s._v("echo")]),s._v("å‡º"),t("code",[s._v("SOME_PATH")]),s._v("çš„å€¼å—ï¼Ÿ")]),s._v(" "),t("p",[s._v("ç­”æ¡ˆæ˜¯ä¸ä¼šã€‚ä¼šechoå‡º"),t("code",[s._v('"${SOME_PATH}"')]),s._v("è¿™ä¸ªå­—ç¬¦ä¸²ã€‚")]),s._v(" "),t("p",[s._v("é‚£èƒ½æŠŠ"),t("code",[s._v("SOME_PATH")]),s._v("å’Œ"),t("code",[s._v("echo")]),s._v("å†™åœ¨ä¸€èµ·å—ï¼ŸğŸ‘‡")]),s._v(" "),t("div",{staticClass:"language-Dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" alpine\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" SOME_PATH /some/path\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${SOME_PATH}"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("ä¹Ÿä¸è¡Œã€‚ä¼šæŠ¥é”™ï¼š"),t("code",[s._v('exec: \\"echo ${SOME_PATH}\\": executable file not found in $PATH')]),s._v("ï¼Œè¿™å°±æ˜¯è¯´dockerä¸çŸ¥é“æ€ä¹ˆåœ°æŠŠ"),t("code",[s._v("echo ${SOME_PATH}")]),s._v("ææˆä¸€æ•´ä¸ªæŒ‡ä»¤äº†ã€‚")]),s._v(" "),t("p",[s._v("é‚£ä¸åŠ å¼•å·å‘¢ï¼ŸğŸ‘‡")]),s._v(" "),t("div",{staticClass:"language-Dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" alpine\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" SOME_PATH /some/path\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" echo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SOME_PATH"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("ä¹Ÿä¸è¡Œï¼Œè¿˜æ˜¯æŠ¥é”™ï¼š"),t("code",[s._v("sh: /some/path: unknown operand")]),s._v("ã€‚ç»ˆäºç®—æ˜¯è¯†åˆ«å‡º"),t("code",[s._v("${SOME_PATH}")]),s._v("çš„å€¼äº†ï¼Œå¯æ˜¯åˆä¸çŸ¥æ€çš„å˜æˆæŒ‡ä»¤äº†ï¼Ÿï¼Ÿï¼Ÿ")]),s._v(" "),t("p",[s._v("é‚£ä¹ˆï¼Œæ­£ç¡®æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿè¯·çœ‹ğŸ‘‡")]),s._v(" "),t("div",{staticClass:"language-Dockerfile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" alpine\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" SOME_PATH /some/path\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" echo $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SOME_PATH"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"docker-buildçš„ç½‘ç»œè¿æ¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-buildçš„ç½‘ç»œè¿æ¥"}},[s._v("#")]),s._v(" docker buildçš„ç½‘ç»œè¿æ¥")]),s._v(" "),t("p",[s._v("docker buildé•œåƒæ—¶ï¼Œé»˜è®¤ä½¿ç”¨ç½‘æ¡¥(bridge)æ¨¡å¼ï¼Œå®¹å™¨æ—¶è™šæ‹Ÿç¯å¢ƒï¼Œæ²¡æœ‰è‡ªå·±çš„ç½‘å¡ï¼Œæ‰€ä»¥æ— æ³•è¿æ¥ç½‘ç»œã€‚")]),s._v(" "),t("p",[s._v("å¥½åœ¨dockeråœ¨æ„å»º(build)æˆ–è€…è¿è¡Œ(run)é•œåƒæ—¶éƒ½æä¾›äº†é€‰æ‹©ç½‘ç»œçš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„ç½‘ç»œï¼Œæ–¹å¼æ˜¯"),t("code",[s._v("--network host")]),s._v("æŒ‡ä»¤ã€‚")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker build -t archieves_center "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" --network "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("å¯æ˜¯åœ¨winä¸Šå°±ä¸ç”¨è¿™æ ·ï¼Ÿå¥‡æ€ªäº†ã€‚")])])}),[],!1,null,null,null);a.default=n.exports}}]);