(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{842:function(t,a,e){"use strict";e.r(a);var s=e(4),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("blockquote",[e("p",[t._v("In the previous post I started to look at Gaussian Splatting. One of the issues with it, is that the data sets are not exactly small. The renders look nice:")])]),t._v(" "),e("p",[t._v("åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å¼€å§‹ç ”ç©¶é«˜æ–¯æ³¼æº…ï¼ˆ3DGSï¼š3D Gaussian Splattingï¼‰ã€‚ å®ƒçš„é—®é¢˜ä¹‹ä¸€æ˜¯æ•°æ®é›†å¹¶ä¸å°ã€‚ æ¸²æŸ“å›¾çœ‹èµ·æ¥ä¸é”™ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("But each of the â€œbikeâ€, â€œtruckâ€, â€œgardenâ€ data sets is respectively a 1.42GB, 0.59GB, 1.35GB PLY file. And they are loaded pretty much as-is into GPU memory as giant structured buffers, so at least that much VRAM is needed too (plus more for sorting, plus in the official viewer implementation the tiled splat rasterizer uses some-hundreds-of-MB).")])]),t._v(" "),e("p",[t._v("ä½†â€œè‡ªè¡Œè½¦â€ã€â€œå¡è½¦â€ã€â€œèŠ±å›­â€æ•°æ®é›†åˆ†åˆ«æ˜¯ä¸€ä¸ª 1.42GBã€0.59GBã€1.35GB çš„ PLY æ–‡ä»¶ã€‚ å®ƒä»¬å‡ ä¹æŒ‰åŸæ ·åŠ è½½åˆ° GPU å†…å­˜ä¸­ä½œä¸ºå·¨å¤§çš„ç»“æ„åŒ–ç¼“å†²åŒºï¼Œå› æ­¤è‡³å°‘ä¹Ÿéœ€è¦é‚£ä¹ˆå¤šçš„ VRAMï¼ŒåŠ ä¸Šæ›´å¤šç”¨äºæ’åºï¼ŒåŠ ä¸Šåœ¨å®˜æ–¹æŸ¥çœ‹å™¨å®ç°ä¸­ï¼Œå¹³é“º splat å…‰æ …åŒ–ä½¿ç”¨äº†æ•°ç™¾ MB ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v('I could tell you that I can make the data 19x smaller (78, 32, 74 MB respectively), but then it looks not that great. Still recognizable, but really not good (however, the artifacts are not your typical â€œpolygonal mesh rendering at low LODâ€, they are more like â€œJPG artifacts in space"):')])]),t._v(" "),e("p",[t._v("æˆ‘å¯ä»¥å‘Šè¯‰ä½ ï¼Œæˆ‘å¯ä»¥å°†æ•°æ®ç¼©å° 19 å€ï¼ˆåˆ†åˆ«ä¸º 78ã€32ã€74 MBï¼‰ï¼Œä½†çœ‹èµ·æ¥å¹¶ä¸æ˜¯é‚£ä¹ˆå¥½ã€‚ ä»ç„¶å¯ä»¥è¯†åˆ«ï¼Œä½†ç¡®å®ä¸å¥½ â€” ä½†æ˜¯ï¼Œè¿™äº›ä¼ªå½±ä¸æ˜¯å…¸å‹çš„â€œä½ LOD å¤šè¾¹å½¢ç½‘æ ¼æ¸²æŸ“â€ï¼Œå®ƒä»¬æ›´åƒæ˜¯â€œç©ºé—´ä¸­çš„ JPG ä¼ªå½±â€ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-311.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("However, in between these two extremes there are other configurations, that make the data 5x-10x smaller while looking quite okay.")])]),t._v(" "),e("p",[t._v("ç„¶è€Œï¼Œåœ¨è¿™ä¸¤ä¸ªæç«¯ä¹‹é—´ï¼Œè¿˜æœ‰å…¶ä»–é…ç½®ï¼Œå¯ä»¥ä½¿æ•°æ®å° 5 å€åˆ° 10 å€ï¼ŒåŒæ—¶çœ‹èµ·æ¥è¿˜ä¸é”™ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("So we are starting at 248 bytes for each splat, and we want to get that down. Note: everywhere here I will be exploring "),e("strong",[t._v("both")]),t._v(" storage and runtime memory usage, i.e. not â€œfile compressionâ€! Rather, I want to cut down on GPU memory consumption too. Getting runtime data smaller also makes the data on disk smaller as a side effect, but â€œstorage sizeâ€ is a whole another and partially independent topic. Maybe for some other day!")])]),t._v(" "),e("p",[t._v("å› æ­¤ï¼Œæˆ‘ä»¬ä»æ¯ä¸ª splat çš„ 248 å­—èŠ‚å¼€å§‹ï¼Œæˆ‘ä»¬å¸Œæœ›å°†å…¶å‡å°‘ã€‚ æ³¨æ„ï¼šåœ¨è¿™é‡Œæˆ‘å°†æ¢ç´¢å­˜å‚¨å’Œè¿è¡Œæ—¶å†…å­˜çš„ä½¿ç”¨ï¼Œå³ä¸æ˜¯â€œæ–‡ä»¶å‹ç¼©â€ï¼ ç›¸åï¼Œæˆ‘ä¹Ÿæƒ³å‡å°‘ GPU å†…å­˜æ¶ˆè€—ã€‚ å‡å°è¿è¡Œæ—¶æ•°æ®çš„å‰¯ä½œç”¨ä¹Ÿä¼šä½¿ç£ç›˜ä¸Šçš„æ•°æ®å˜å°ï¼Œä½†â€œå­˜å‚¨å¤§å°â€æ˜¯å¦ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ä¸»é¢˜ã€‚ ä¹Ÿè®¸æ”¹å¤©å§ï¼")]),t._v(" "),e("blockquote",[e("p",[t._v("One obvious and easy thing to do with the splat data, is to notice that the â€œnormalâ€ (12 bytes) is completely unused. That does not save much though. Then you can of course try making all the numbers be Float16 instead of Float32, this is acceptably good but only makes the data 2x smaller.")])]),t._v(" "),e("p",[t._v("ä½¿ç”¨ splat æ•°æ®è¦åšçš„ä¸€ä»¶æ˜æ˜¾ä¸”ç®€å•çš„äº‹æƒ…æ˜¯æ³¨æ„â€œæ³•çº¿â€ï¼ˆ12 å­—èŠ‚ï¼‰å®Œå…¨æœªä½¿ç”¨ã€‚ ä½†è¿™å¹¶ä¸èƒ½èŠ‚çœå¤ªå¤šã€‚ é‚£ä¹ˆä½ å½“ç„¶å¯ä»¥å°è¯•å°†æ‰€æœ‰æ•°å­—è®¾ç½®ä¸º Float16 è€Œä¸æ˜¯ Float32ï¼Œè¿™è¿˜ç®—ä¸é”™ï¼Œä½†åªä¼šä½¿æ•°æ®å˜å° 2 å€ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("You could also throw away all the spherical harmonics data and leave only the â€œbase colorâ€ (i.e. SH0), and that would cut down 75% of the data size! This does change the lighting and removes some â€œreflectionsâ€, and is more visible in motion, but progressively dropping SH bands with lower quality levels (or progressively loading them in) is easy and sensible.")])]),t._v(" "),e("p",[t._v("ä½ è¿˜å¯ä»¥ä¸¢å¼ƒæ‰€æœ‰çƒè°å‡½æ•°æ•°æ®ï¼Œåªç•™ä¸‹â€œåŸºè‰²â€ï¼ˆå³ SH0ï¼‰ï¼Œè¿™å°†å‡å°‘ 75% çš„æ•°æ®å¤§å°ï¼ è¿™ç¡®å®ä¼šæ”¹å˜ç…§æ˜å¹¶æ¶ˆé™¤ä¸€äº›â€œåå°„â€ï¼Œå¹¶ä¸”åœ¨è¿åŠ¨ä¸­æ›´åŠ æ˜æ˜¾ï¼Œä½†é€æ¸é™ä½è´¨é‡æ°´å¹³è¾ƒä½çš„ SH é¢‘æ®µï¼ˆæˆ–é€æ¸åŠ è½½å®ƒä»¬ï¼‰æ˜¯ç®€å•ä¸”æ˜æ™ºçš„ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("So of course, letâ€™s look at what else we can do ğŸ˜ƒ")])]),t._v(" "),e("p",[t._v("å½“ç„¶ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬è¿˜èƒ½åšä»€ä¹ˆ:)")]),t._v(" "),e("h2",{attrs:{id:"reorder-and-cut-into-chunks-é‡æ–°æ’åºå¹¶åˆ‡æˆå—"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reorder-and-cut-into-chunks-é‡æ–°æ’åºå¹¶åˆ‡æˆå—"}},[t._v("#")]),t._v(" Reorder and cut into chunks é‡æ–°æ’åºå¹¶åˆ‡æˆå—")]),t._v(" "),e("blockquote",[e("p",[t._v("The ordering of splats inside the data file does not matter; we are going to sort them by distance at rendering time anyway. In the PLY data file they are effectively random (each point here is one splat, and color is gradient based on the point index):")])]),t._v(" "),e("p",[t._v("æ•°æ®æ–‡ä»¶ä¸­ splats çš„é¡ºåºå¹¶ä¸é‡è¦ï¼› æ— è®ºå¦‚ä½•ï¼Œæˆ‘ä»¬å°†åœ¨æ¸²æŸ“æ—¶æŒ‰è·ç¦»å¯¹å®ƒä»¬è¿›è¡Œæ’åºã€‚ åœ¨ PLY æ•°æ®æ–‡ä»¶ä¸­ï¼Œå®ƒä»¬å®é™…ä¸Šæ˜¯éšæœºçš„ï¼Œè¿™é‡Œçš„æ¯ä¸ªç‚¹éƒ½æ˜¯ä¸€ä¸ªå›¾å—ï¼Œé¢œè‰²æ˜¯åŸºäºç‚¹ç´¢å¼•çš„æ¸å˜ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-313.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("But we could reorder them based on â€œlocalityâ€ (or any other criteria). For example, ordering them in a "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Z-order_curve",target:"_blank",rel:"noopener noreferrer"}},[t._v("3D Morton order"),e("OutboundLink")],1),t._v(", generally, makes nearby points in space be near each other inside the data array:")])]),t._v(" "),e("p",[t._v("ä½†æˆ‘ä»¬å¯ä»¥æ ¹æ®â€œä½ç½®â€ï¼ˆæˆ–ä»»ä½•å…¶ä»–æ ‡å‡†ï¼‰å¯¹å®ƒä»¬é‡æ–°æ’åºã€‚ ä¾‹å¦‚ï¼ŒæŒ‰ "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Z-order_curve",target:"_blank",rel:"noopener noreferrer"}},[t._v("3D Morton é¡ºåº"),e("OutboundLink")],1),t._v("å¯¹å®ƒä»¬è¿›è¡Œæ’åºé€šå¸¸ä¼šä½¿ç©ºé—´ä¸­çš„é‚»è¿‘ç‚¹åœ¨æ•°æ®æ•°ç»„å†…å½¼æ­¤é è¿‘ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-314.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("And then, I can group splats into chunks of N (N=256 was my choice), and hope that since they would generally be close together, maybe they have lower variance of their data, or at least their data can be "),e("em",[t._v("somehow")]),t._v(" represented in fewer bits. If I visualize the chunk bounding boxes, they are generally small and scattered all over the scene:")])]),t._v(" "),e("p",[t._v("ç„¶åï¼Œæˆ‘å¯ä»¥å°† splats åˆ†ç»„ä¸º N å—ï¼ˆN = 256 æ˜¯æˆ‘çš„é€‰æ‹©ï¼‰ï¼Œå¹¶å¸Œæœ›ç”±äºå®ƒä»¬é€šå¸¸ä¼šé è¿‘åœ¨ä¸€èµ·ï¼Œä¹Ÿè®¸å®ƒä»¬çš„æ•°æ®æ–¹å·®è¾ƒä½ï¼Œæˆ–è€…è‡³å°‘å®ƒä»¬çš„æ•°æ®å¯ä»¥ä»¥æŸç§æ–¹å¼è¡¨ç¤º æ›´å°‘çš„ä½ã€‚ å¦‚æœæˆ‘æƒ³è±¡å—è¾¹ç•Œæ¡†ï¼Œå®ƒä»¬é€šå¸¸å¾ˆå°å¹¶ä¸”åˆ†æ•£åœ¨æ•´ä¸ªåœºæ™¯ä¸­ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-315.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("This is pretty much slides 112-113 of "),e("a",{attrs:{href:"https://advances.realtimerendering.com/s2015/#_TESSELLATION_IN_CALL",target:"_blank",rel:"noopener noreferrer"}},[t._v("â€œLearning from Failureâ€"),e("OutboundLink")],1),t._v(" Dreams talk.")])]),t._v(" "),e("p",[t._v("è¿™å‡ ä¹å°±æ˜¯"),e("a",{attrs:{href:"https://advances.realtimerendering.com/s2015/#_TESSELLATION_IN_CALL",target:"_blank",rel:"noopener noreferrer"}},[t._v("â€œä»å¤±è´¥ä¸­å­¦ä¹ â€"),e("OutboundLink")],1),t._v("æ¢¦æƒ³æ¼”è®²çš„å¹»ç¯ç‰‡ 112-113ã€‚")]),t._v(" "),e("blockquote",[e("blockquote",[e("p",[t._v("Future work: try Hilbert curve ordering instead of Morton. Also try â€œpartially filled chunksâ€ to break up large chunk bounds, that happen whenever the Morton curve flips to the other side.")])]),t._v(" "),e("p",[t._v("æœªæ¥çš„å·¥ä½œï¼šå°è¯•å¸Œå°”ä¼¯ç‰¹æ›²çº¿æ’åºè€Œä¸æ˜¯è«é¡¿ã€‚ è¿˜å¯ä»¥å°è¯•â€œéƒ¨åˆ†å¡«å……å—â€æ¥æ‰“ç ´å¤§å—è¾¹ç•Œï¼Œæ¯å½“è«é¡¿æ›²çº¿ç¿»è½¬åˆ°å¦ä¸€ä¾§æ—¶å°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚")])]),t._v(" "),e("blockquote",[e("p",[t._v("By the way, Morton reordering can also make the rendering faster, since even after sorting by distance the nearby points are more likely to be nearby in the original data array. And of course, nice code to do Morton calculations without relying on "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/X86_Bit_manipulation_instruction_set",target:"_blank",rel:"noopener noreferrer"}},[t._v("BMI"),e("OutboundLink")],1),t._v(" or similar CPU instructions can be found on "),e("a",{attrs:{href:"https://fgiesen.wordpress.com/2009/12/13/decoding-morton-codes/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fabianâ€™s blog"),e("OutboundLink")],1),t._v(", adapted here for 64 bit result case:")])]),t._v(" "),e("p",[t._v("é¡ºä¾¿è¯´ä¸€å¥ï¼Œè«é¡¿é‡æ–°æ’åºè¿˜å¯ä»¥ä½¿æ¸²æŸ“é€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºå³ä½¿åœ¨æŒ‰è·ç¦»æ’åºåï¼Œé™„è¿‘çš„ç‚¹æ›´æœ‰å¯èƒ½ä½äºåŸå§‹æ•°æ®æ•°ç»„ä¸­é™„è¿‘ã€‚ å½“ç„¶ï¼Œå¯ä»¥åœ¨ "),e("a",{attrs:{href:"https://fgiesen.wordpress.com/2009/12/13/decoding-morton-codes/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fabian çš„åšå®¢"),e("OutboundLink")],1),t._v("ä¸Šæ‰¾åˆ°åœ¨ä¸ä¾èµ– "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/X86_Bit_manipulation_instruction_set",target:"_blank",rel:"noopener noreferrer"}},[t._v("BMI"),e("OutboundLink")],1),t._v(" æˆ–ç±»ä¼¼ CPU æŒ‡ä»¤çš„æƒ…å†µä¸‹æ‰§è¡Œ Morton è®¡ç®—çš„å¥½ä»£ç ï¼Œæ­¤å¤„é’ˆå¯¹ 64 ä½ç»“æœæƒ…å†µè¿›è¡Œäº†è°ƒæ•´ï¼š")]),t._v(" "),e("div",{staticClass:"language-cpp line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Based on https://fgiesen.wordpress.com/2009/12/13/decoding-morton-codes/")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Insert two 0 bits after each of the 21 low bits of x")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" ulong "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("MortonPart1By2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ulong x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x1fffff")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x1f00000000ffffUL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x1f0000ff0000ffUL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x100f00f00f00f00fUL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x10c30c30c30c30c3UL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x1249249249249249UL")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Encode three 21-bit integers into 3D Morton order")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" ulong "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("MortonEncode3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uint3 v"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("MortonPart1By2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("z"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("MortonPart1By2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("MortonPart1By2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br")])]),e("h2",{attrs:{id:"make-all-data-0-1-relative-to-the-chunk-ä½¿æ‰€æœ‰æ•°æ®ç›¸å¯¹äºå—ä¸º-0-1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#make-all-data-0-1-relative-to-the-chunk-ä½¿æ‰€æœ‰æ•°æ®ç›¸å¯¹äºå—ä¸º-0-1"}},[t._v("#")]),t._v(" Make all data 0..1 relative to the chunk ä½¿æ‰€æœ‰æ•°æ®ç›¸å¯¹äºå—ä¸º 0..1")]),t._v(" "),e("blockquote",[e("p",[t._v("Now that all the splats are cut into 256-splat size chunks, we can compute minimum and maximum data values of everything (positions, scales, colors, SHs etc.) for each chunk, and store that away. We donâ€™t care about data size of that (yet?); just store them in full floats.")])]),t._v(" "),e("p",[t._v("ç°åœ¨æ‰€æœ‰çš„å›¾å—éƒ½è¢«åˆ‡å‰²æˆ 256 ä¸ªå›¾å—å¤§å°çš„å—ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—æ¯ä¸ªå—çš„æ‰€æœ‰å†…å®¹ï¼ˆä½ç½®ã€æ¯”ä¾‹ã€é¢œè‰²ã€SH ç­‰ï¼‰çš„æœ€å°å’Œæœ€å¤§æ•°æ®å€¼ï¼Œå¹¶å°†å…¶å­˜å‚¨èµ·æ¥ã€‚ æˆ‘ä»¬ä¸å…³å¿ƒæ•°æ®å¤§å°ï¼ˆè¿˜ï¼Ÿï¼‰ï¼› åªéœ€å°†å®ƒä»¬å­˜å‚¨åœ¨å®Œæ•´çš„æµ®åŠ¨ä¸­å³å¯ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("And now, adjust the splat data so that all the numbers are in 0..1 range between chunk minimum & maximum values. If that is kept in Float32 as it was before, then this does not really change precision in any noticeable way, just adds a bit of indirection inside the rendering shader (to figure out final splat data, you need to fetch chunk min & max, and interpolate between those based on splat values).")])]),t._v(" "),e("p",[t._v("ç°åœ¨ï¼Œè°ƒæ•´ splat æ•°æ®ï¼Œä½¿æ‰€æœ‰æ•°å­—éƒ½åœ¨å—æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´çš„ 0..1 èŒƒå›´å†…ã€‚ å¦‚æœåƒä»¥å‰ä¸€æ ·ä¿ç•™åœ¨ Float32 ä¸­ï¼Œé‚£ä¹ˆè¿™å¹¶ä¸ä¼šä»¥ä»»ä½•æ˜æ˜¾çš„æ–¹å¼çœŸæ­£æ”¹å˜ç²¾åº¦ï¼Œåªæ˜¯åœ¨æ¸²æŸ“ç€è‰²å™¨å†…æ·»åŠ ä¸€äº›é—´æ¥ï¼ˆè¦è®¡ç®—å‡ºæœ€ç»ˆçš„ splat æ•°æ®ï¼Œä½ éœ€è¦è·å–å— min å’Œ maxï¼Œ å¹¶æ ¹æ® splat å€¼åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œæ’å€¼ï¼‰ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("Oh, and for rotations, Iâ€™m encoding the quaternions in "),e("a",{attrs:{href:"https://marc-b-reynolds.github.io/quaternions/2017/05/02/QuatQuantPart1.html#smallest-three",target:"_blank",rel:"noopener noreferrer"}},[t._v("â€œsmallest threeâ€"),e("OutboundLink")],1),t._v(" format (store smallest 3 components, plus index of which component was the largest).")])]),t._v(" "),e("p",[t._v("å“¦ï¼Œå¯¹äºæ—‹è½¬ï¼Œæˆ‘ä»¥â€œæœ€å°ä¸‰ä¸ªâ€æ ¼å¼å¯¹å››å…ƒæ•°è¿›è¡Œç¼–ç ï¼ˆå­˜å‚¨æœ€å°çš„ 3 ä¸ªåˆ†é‡ï¼ŒåŠ ä¸Šæœ€å¤§åˆ†é‡çš„ç´¢å¼•ï¼‰ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("And now that the data is all in 0..1 range, we can try representing it with smaller data types than full Float32!")])]),t._v(" "),e("p",[t._v("ç°åœ¨æ•°æ®éƒ½åœ¨ 0..1 èŒƒå›´å†…ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç”¨æ¯”å®Œæ•´ Float32 æ›´å°çš„æ•°æ®ç±»å‹æ¥è¡¨ç¤ºå®ƒï¼")]),t._v(" "),e("blockquote",[e("p",[t._v("But first, how does all that 0..1 data look like? The following is various data displayed as RGB colors, one pixel per splat, in row major order. With positions, you can clearly see that it changes within the 256 sized chunk (itâ€™s two chunks per horizontal line):")])]),t._v(" "),e("p",[t._v("ä½†é¦–å…ˆï¼Œæ‰€æœ‰ 0..1 æ•°æ®æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ ä»¥ä¸‹æ˜¯ä»¥ RGB é¢œè‰²æ˜¾ç¤ºçš„å„ç§æ•°æ®ï¼Œæ¯ä¸ªå›¾ä¸€ä¸ªåƒç´ ï¼ŒæŒ‰è¡Œä¸»è¦é¡ºåºã€‚ é€šè¿‡ä½ç½®ï¼Œä½ å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°å®ƒåœ¨ 256 å¤§å°çš„å—å†…å‘ç”Ÿå˜åŒ–ï¼ˆæ¯æ¡æ°´å¹³çº¿æœ‰ä¸¤ä¸ªå—ï¼‰ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-316.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("Rotations do have some horizontal streaks but are way more random:")])]),t._v(" "),e("p",[t._v("æ—‹è½¬ç¡®å®æœ‰ä¸€äº›æ°´å¹³æ¡çº¹ï¼Œä½†æ›´åŠ éšæœºï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-317.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("Scale has some horizontal patterns too, but we can also see that most of scales are towards smaller values:")])]),t._v(" "),e("p",[t._v("æ¯”ä¾‹ä¹Ÿæœ‰ä¸€äº›æ°´å¹³æ¨¡å¼ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°å¤§å¤šæ•°æ¯”ä¾‹éƒ½æœå‘è¾ƒå°çš„å€¼ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-318.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("Color (SH0) is this:")])]),t._v(" "),e("p",[t._v("é¢œè‰²(SH0)æ˜¯è¿™æ ·çš„ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-319.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("And opacity is often either almost transparent, or almost opaque:")])]),t._v(" "),e("p",[t._v("ä¸é€æ˜åº¦é€šå¸¸è¦ä¹ˆå‡ ä¹é€æ˜ï¼Œè¦ä¹ˆå‡ ä¹ä¸é€æ˜ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-320.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("Thereâ€™s a lot of spherical harmonics bands and they tend to look like a similar mess, so hereâ€™s one of them:")])]),t._v(" "),e("p",[t._v("æœ‰å¾ˆå¤šçƒè°å‡½æ•°å¸¦ï¼Œå®ƒä»¬å¾€å¾€çœ‹èµ·æ¥åƒä¸€å›¢ä¹±éº»ï¼Œæ‰€ä»¥è¿™æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-321.png",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"hey-this-data-looks-a-lot-like-textures-å˜¿ï¼Œè¿™ä¸ªæ•°æ®çœ‹èµ·æ¥å¾ˆåƒçº¹ç†ï¼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hey-this-data-looks-a-lot-like-textures-å˜¿ï¼Œè¿™ä¸ªæ•°æ®çœ‹èµ·æ¥å¾ˆåƒçº¹ç†ï¼"}},[t._v("#")]),t._v(" Hey this data looks a lot like textures! å˜¿ï¼Œè¿™ä¸ªæ•°æ®çœ‹èµ·æ¥å¾ˆåƒçº¹ç†ï¼")]),t._v(" "),e("blockquote",[e("p",[t._v("Weâ€™ve got 3 or 4 values per each â€œthingâ€ (position, color, rotation, â€¦) that are all in 0..1 range now. I know! Letâ€™s put them into textures, one texel per splat. And then we can easily experiment with using various texture formats on them, and have the GPU texture sampling hardware do all the heavy lifting of turning the data into numbers.")])]),t._v(" "),e("p",[t._v("æˆ‘ä»¬ä¸ºæ¯ä¸ªâ€œäº‹ç‰©â€ï¼ˆä½ç½®ã€é¢œè‰²ã€æ—‹è½¬â€¦â€¦ï¼‰æä¾›äº† 3 æˆ– 4 ä¸ªå€¼ï¼Œç°åœ¨è¿™äº›å€¼éƒ½åœ¨ 0..1 èŒƒå›´å†…ã€‚ æˆ‘çŸ¥é“ï¼ è®©æˆ‘ä»¬å°†å®ƒä»¬æ”¾å…¥çº¹ç†ä¸­ï¼Œæ¯ä¸ª splat ä¸€ä¸ªçº¹ç†å…ƒç´ ã€‚ ç„¶åæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åœ¨å®ƒä»¬ä¸Šå°è¯•ä½¿ç”¨å„ç§çº¹ç†æ ¼å¼ï¼Œå¹¶è®© GPU çº¹ç†é‡‡æ ·ç¡¬ä»¶å®Œæˆå°†æ•°æ®è½¬æ¢ä¸ºæ•°å­—çš„æ‰€æœ‰ç¹é‡å·¥ä½œã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("We could even, I dunno, use something crazy like use compressed texture formats (e.g. BC1 or BC7) on these textures. Would that work well? Turns out, not immediately. Hereâ€™s turning all the data (position, rotation, scale, color/opacity, SH) into BC7 compressed texture. Data is just 122MB (12x smaller), but PSNR is a low 21.71 compared to "),e("a",{attrs:{href:"https://aras-p.info/img/blog/2023/gaussian-splat/GsBike_1VeryHigh.jpg",target:"_blank",rel:"noopener noreferrer"}},[t._v("full Float32 data"),e("OutboundLink")],1),t._v(":")])]),t._v(" "),e("p",[t._v("æˆ‘ä¸çŸ¥é“ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥ä½¿ç”¨ä¸€äº›ç–¯ç‹‚çš„ä¸œè¥¿ï¼Œæ¯”å¦‚åœ¨è¿™äº›çº¹ç†ä¸Šä½¿ç”¨å‹ç¼©çº¹ç†æ ¼å¼ï¼ˆä¾‹å¦‚ BC1 æˆ– BC7ï¼‰ã€‚ è¿™æ ·æ•ˆæœå¥½å—ï¼Ÿ äº‹å®è¯æ˜ï¼Œä¸æ˜¯ç«‹å³ã€‚ è¿™é‡Œå°†æ‰€æœ‰æ•°æ®ï¼ˆä½ç½®ã€æ—‹è½¬ã€æ¯”ä¾‹ã€é¢œè‰²/ä¸é€æ˜åº¦ã€SHï¼‰è½¬æ¢ä¸º BC7 å‹ç¼©çº¹ç†ã€‚ æ•°æ®åªæœ‰ 122MBï¼ˆå° 12 å€ï¼‰ï¼Œä½†ä¸"),e("a",{attrs:{href:"https://aras-p.info/img/blog/2023/gaussian-splat/GsBike_1VeryHigh.jpg",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®Œæ•´ Float32 æ•°æ®"),e("OutboundLink")],1),t._v("ç›¸æ¯”ï¼ŒPSNR ä½è‡³ 21.71ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-322.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("However, we know that GPU texture compression formats are block based, e.g. on typical PC the BCn compression formats are all based on 4x4 texel blocks. But our texture data is laid out in 256x1 stripes of splat chunks, one after another. Letâ€™s reorder them some more, i.e. lay out each chunk in a 16x16 texel square, again arranged in Morton order within it.")])]),t._v(" "),e("p",[t._v("ç„¶è€Œï¼Œæˆ‘ä»¬çŸ¥é“ GPU çº¹ç†å‹ç¼©æ ¼å¼æ˜¯åŸºäºå—çš„ï¼Œä¾‹å¦‚ åœ¨å…¸å‹çš„ PC ä¸Šï¼ŒBCn å‹ç¼©æ ¼å¼å‡åŸºäº 4x4 çº¹ç´ å—ã€‚ ä½†æˆ‘ä»¬çš„çº¹ç†æ•°æ®æ˜¯ä»¥ 256x1 æ¡å¸¦çš„ splat å—çš„å½¢å¼æ’åˆ—çš„ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªã€‚ è®©æˆ‘ä»¬å¯¹å®ƒä»¬è¿›è¡Œæ›´å¤šçš„é‡æ–°æ’åºï¼Œå³å°†æ¯ä¸ªå—å¸ƒç½®åœ¨ 16x16 çº¹ç´ æ­£æ–¹å½¢ä¸­ï¼Œå†æ¬¡æŒ‰ç…§è«é¡¿é¡ºåºæ’åˆ—ã€‚")]),t._v(" "),e("div",{staticClass:"language-cpp line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-cpp"}},[e("code",[t._v("uint "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("EncodeMorton2D_16x16")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uint2 c"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    uint t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("y "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xF")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xF")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ----EFGH----ABCD")]),t._v("\n    t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x3333")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("               "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// --EF--GH--AB--CD")]),t._v("\n    t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x5555")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("               "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -E-F-G-H-A-B-C-D")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xFF")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("              "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// --------EAFBGCHD")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nuint2 "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("DecodeMorton2D_16x16")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uint t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// --------EAFBGCHD")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xFF")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xFE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -EAFBGCHEAFBGCHD")]),t._v("\n    t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x5555")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -E-F-G-H-A-B-C-D")]),t._v("\n    t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x3333")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// --EF--GH--AB--CD")]),t._v("\n    t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x0f0f")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ----EFGH----ABCD")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uint2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0xF")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" t "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// --------EFGHABCD")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br")])]),e("blockquote",[e("p",[t._v("And if we rearrange all the texture data that way, then it looks like this now (position, rotation, scale, color, opacity, SH1):")])]),t._v(" "),e("p",[t._v("å¦‚æœæˆ‘ä»¬ä»¥è¿™ç§æ–¹å¼é‡æ–°æ’åˆ—æ‰€æœ‰çº¹ç†æ•°æ®ï¼Œé‚£ä¹ˆç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·ï¼ˆä½ç½®ã€æ—‹è½¬ã€ç¼©æ”¾ã€é¢œè‰²ã€ä¸é€æ˜åº¦ã€SH1ï¼‰ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-323.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("And encoding all that into BC7 improves the quality quite a bit (PSNR 21.71â†’24.18):")])]),t._v(" "),e("p",[t._v("å°†æ‰€æœ‰è¿™äº›ç¼–ç åˆ° BC7 ä¸­å¯ä»¥å¤§å¤§æé«˜è´¨é‡ï¼ˆPSNR 21.71â†’24.18ï¼‰ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-324.png",alt:""}})]),t._v(" "),e("h2",{attrs:{id:"so-what-texture-formats-should-be-used-é‚£ä¹ˆåº”è¯¥ä½¿ç”¨ä»€ä¹ˆçº¹ç†æ ¼å¼å‘¢ï¼Ÿ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#so-what-texture-formats-should-be-used-é‚£ä¹ˆåº”è¯¥ä½¿ç”¨ä»€ä¹ˆçº¹ç†æ ¼å¼å‘¢ï¼Ÿ"}},[t._v("#")]),t._v(" So what texture formats should be used? é‚£ä¹ˆåº”è¯¥ä½¿ç”¨ä»€ä¹ˆçº¹ç†æ ¼å¼å‘¢ï¼Ÿ")]),t._v(" "),e("blockquote",[e("p",[t._v("After playing around with a whole bunch of possible settings, hereâ€™s the quality setting levels I came up with. Formats indicated in the table below:")])]),t._v(" "),e("p",[t._v("åœ¨å°è¯•äº†ä¸€å¤§å †å¯èƒ½çš„è®¾ç½®ä¹‹åï¼Œè¿™æ˜¯æˆ‘æƒ³å‡ºçš„è´¨é‡è®¾ç½®çº§åˆ«ã€‚ æ ¼å¼å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š")]),t._v(" "),e("blockquote",[e("ul",[e("li",[t._v("F32x4: 4x Float32 (128 bits). Since GPUs typically do not have a three-channel Float32 texture format, I expand the data quite uselessly in this case, when only three components are needed.")]),t._v(" "),e("li",[t._v("F16x4: 4x Float16 (64 bits). Similar expansion to 4 components as above.")]),t._v(" "),e("li",[t._v("Norm10_2: unsigned normalized 10.10.10.2 (32 bits). GPUs do support this, and Unity almost supports it â€“ it exposes the format enum member, but actually does not allow you to create texture with said format (lol!). So I emulate it by pretending the texture is in a single component Float32 format, and manually â€œunpackâ€ in the shader.")]),t._v(" "),e("li",[t._v("Norm11: unsigned normalized 11.10.11 (32 bits). GPUs do not have it, but since Iâ€™m emulating a similar format anyway (see above), then why not use more bits when we only need three components.")]),t._v(" "),e("li",[t._v("Norm8x4: 4x unsigned normalized byte (32 bits).")]),t._v(" "),e("li",[t._v("Norm565: unsigned normalized 5.6.5 (16 bits).")]),t._v(" "),e("li",[t._v("BC7 and BC1: obvious, 8 and 4 bits respectively.")])])]),t._v(" "),e("ul",[e("li",[t._v("F32x4ï¼š4x Float32ï¼ˆ128 ä½ï¼‰ã€‚ ç”±äº GPU é€šå¸¸æ²¡æœ‰ä¸‰é€šé“ Float32 çº¹ç†æ ¼å¼ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“åªéœ€è¦ä¸‰ä¸ªç»„ä»¶æ—¶ï¼Œæˆ‘æ‰©å±•æ•°æ®æ¯«æ— ç”¨å¤„ã€‚")]),t._v(" "),e("li",[t._v("F16x4ï¼š4x Float16ï¼ˆ64 ä½ï¼‰ã€‚ ä¸ä¸Šé¢çš„ 4 ä¸ªç»„ä»¶ç±»ä¼¼çš„æ‰©å±•ã€‚")]),t._v(" "),e("li",[t._v("Norm10_2ï¼šæ— ç¬¦å·æ ‡å‡†åŒ– 10.10.10.2ï¼ˆ32 ä½ï¼‰ã€‚ GPU ç¡®å®æ”¯æŒè¿™ä¸€ç‚¹ï¼Œå¹¶ä¸” Unity å‡ ä¹æ”¯æŒå®ƒ - å®ƒå…¬å¼€äº†æ ¼å¼æšä¸¾æˆå‘˜ï¼Œä½†å®é™…ä¸Šä¸å…è®¸æ‚¨ä½¿ç”¨æ‰€è¿°æ ¼å¼åˆ›å»ºçº¹ç†ï¼ˆå“ˆå“ˆï¼ï¼‰ã€‚ å› æ­¤ï¼Œæˆ‘é€šè¿‡å‡è£…çº¹ç†é‡‡ç”¨å•ä¸ªç»„ä»¶ Float32 æ ¼å¼æ¥æ¨¡æ‹Ÿå®ƒï¼Œå¹¶åœ¨ç€è‰²å™¨ä¸­æ‰‹åŠ¨â€œè§£åŒ…â€ã€‚")]),t._v(" "),e("li",[t._v("Norm11ï¼šæ— ç¬¦å·æ ‡å‡†åŒ– 11.10.11ï¼ˆ32 ä½ï¼‰ã€‚ GPU æ²¡æœ‰å®ƒï¼Œä½†æ—¢ç„¶æˆ‘æ— è®ºå¦‚ä½•éƒ½åœ¨æ¨¡æ‹Ÿç±»ä¼¼çš„æ ¼å¼ï¼ˆè§ä¸Šæ–‡ï¼‰ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬åªéœ€è¦ä¸‰ä¸ªç»„ä»¶æ—¶ä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ›´å¤šçš„ä½ã€‚")]),t._v(" "),e("li",[t._v("Norm8x4ï¼š4x æ— ç¬¦å·æ ‡å‡†åŒ–å­—èŠ‚ï¼ˆ32 ä½ï¼‰ã€‚")]),t._v(" "),e("li",[t._v("Norm565ï¼šæ— ç¬¦å·æ ‡å‡†åŒ– 5.6.5ï¼ˆ16 ä½ï¼‰ã€‚")]),t._v(" "),e("li",[t._v("BC7å’ŒBC1ï¼šæ˜æ˜¾ï¼Œåˆ†åˆ«æ˜¯8ä½å’Œ4ä½ã€‚")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("è´¨é‡")]),t._v(" "),e("th",[t._v("Pos")]),t._v(" "),e("th",[t._v("Rot")]),t._v(" "),e("th",[t._v("Scl")]),t._v(" "),e("th",[t._v("Col")]),t._v(" "),e("th",[t._v("SH")]),t._v(" "),e("th",[t._v("Compr")]),t._v(" "),e("th",[t._v("PSNR")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("æé«˜")]),t._v(" "),e("td",[t._v("F32x4")]),t._v(" "),e("td",[t._v("F32x4")]),t._v(" "),e("td",[t._v("F32x4")]),t._v(" "),e("td",[t._v("F32x4")]),t._v(" "),e("td",[t._v("F32x4")]),t._v(" "),e("td",[t._v("0.8x")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("é«˜")]),t._v(" "),e("td",[t._v("F16x4")]),t._v(" "),e("td",[t._v("Norm10_2")]),t._v(" "),e("td",[t._v("Norm11")]),t._v(" "),e("td",[t._v("F16x4")]),t._v(" "),e("td",[t._v("Norm11")]),t._v(" "),e("td",[t._v("2.9x")]),t._v(" "),e("td",[t._v("54.82")])]),t._v(" "),e("tr",[e("td",[t._v("ä¸­")]),t._v(" "),e("td",[t._v("Norm11")]),t._v(" "),e("td",[t._v("Norm10_2")]),t._v(" "),e("td",[t._v("Norm11")]),t._v(" "),e("td",[t._v("Norm8x4")]),t._v(" "),e("td",[t._v("Norm565")]),t._v(" "),e("td",[t._v("5.2x")]),t._v(" "),e("td",[t._v("47.82")])]),t._v(" "),e("tr",[e("td",[t._v("ä½")]),t._v(" "),e("td",[t._v("Norm11")]),t._v(" "),e("td",[t._v("Norm10_2")]),t._v(" "),e("td",[t._v("Norm565")]),t._v(" "),e("td",[t._v("BC7")]),t._v(" "),e("td",[t._v("BC1")]),t._v(" "),e("td",[t._v("12.2x")]),t._v(" "),e("td",[t._v("34.79")])]),t._v(" "),e("tr",[e("td",[t._v("æä½")]),t._v(" "),e("td",[t._v("BC7")]),t._v(" "),e("td",[t._v("BC7")]),t._v(" "),e("td",[t._v("BC7")]),t._v(" "),e("td",[t._v("BC7")]),t._v(" "),e("td",[t._v("BC1")]),t._v(" "),e("td",[t._v("18.7x")]),t._v(" "),e("td",[t._v("24.02")])])])]),t._v(" "),e("blockquote",[e("p",[t._v("Here are the â€œreferenceâ€ (â€œVery Highâ€) images again (1.42GB, 0.59GB, 1.35GB data size):")])]),t._v(" "),e("p",[t._v("ä»¥ä¸‹æ˜¯â€œå‚è€ƒâ€å›¾åƒï¼Œ1.42GBã€0.59GBã€1.35GB æ•°æ®å¤§å°ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-325.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("The â€œMediumâ€ preset looks pretty good! (280MB, 116MB, 267MB â€“ 5.2x smaller; PSNR respectively 47.82, 48.73, 48.63):")])]),t._v(" "),e("p",[t._v("â€œä¸­ç­‰â€çœ‹èµ·æ¥å¾ˆæ£’ï¼Œ280MB, 116MB, 267MB â€“ ç¼©å°5.2å€; PSNR 47.82, 48.73, 48.63:")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/20231227213346.png",alt:""}})]),t._v(" "),e("p",[t._v("â€œéå¸¸ä½â€åˆ™ä¸»è¦ä¾›å‚è€ƒï¼› åœ¨å¦‚æ­¤ä½çš„è´¨é‡ä¸‹å®ƒå‡ ä¹å˜å¾—æ¯«æ— ç”¨å¤„ï¼Œ74MBã€32MBã€74MB â€“ ç¼©å° 18.7 å€ï¼›PSNR 24.02ã€22.28ã€23.1ï¼š")]),t._v(" "),e("p",[e("img",{attrs:{src:"i/image-326.png",alt:""}})]),t._v(" "),e("blockquote",[e("p",[t._v("Oh, and I also recorded an awkwardly-moving-camera video, since people like moving pictures:")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://youtu.be/0vS3yh908TU",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://youtu.be/0vS3yh908TU"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"conclusions-and-future-work-ç»“è®ºå’Œæœªæ¥çš„å·¥ä½œ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#conclusions-and-future-work-ç»“è®ºå’Œæœªæ¥çš„å·¥ä½œ"}},[t._v("#")]),t._v(" Conclusions and future work ç»“è®ºå’Œæœªæ¥çš„å·¥ä½œ")]),t._v(" "),e("blockquote",[e("p",[t._v("The gaussian splatting data size (both on-disk and in-memory) can be fairly easily cut down 5x-12x, at fairly acceptable rendering quality level. Say, for that â€œgardenâ€ scene 1.35GB data file is â€œeek, sounds a bit excessiveâ€, but at 110-260MB itâ€™s becoming more interesting. Definitely not small yet, but way more within being usable.")])]),t._v(" "),e("p",[t._v("é«˜æ–¯æ³¼æº…æ•°æ®å¤§å°ï¼ˆç£ç›˜ä¸Šå’Œå†…å­˜ä¸­ï¼‰å¯ä»¥ç›¸å½“å®¹æ˜“åœ°å‡å°‘ 5 å€åˆ° 12 å€ï¼Œæ¸²æŸ“è´¨é‡æ°´å¹³ç›¸å½“å¯æ¥å—ã€‚ æ¯”å¦‚è¯´ï¼Œå¯¹äºâ€œèŠ±å›­â€åœºæ™¯ï¼Œ1.35GB æ•°æ®æ–‡ä»¶â€œå“å‘€ï¼Œå¬èµ·æ¥æœ‰ç‚¹è¿‡åˆ†â€ï¼Œä½†åœ¨ 110-260MB æ—¶ï¼Œå®ƒå˜å¾—æ›´æœ‰è¶£ã€‚ ç»å¯¹è¿˜ä¸ç®—å°ï¼Œä½†æ›´å®ç”¨ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("I think the idea of arranging the splat data â€œsomehowâ€, and then compressing them not by just individually encoding each spat into smaller amount of bits, but also â€œwithin neighborsâ€ (like using BC7 or BC1), is interesting. Spherical Harmonics data in particular looks quite ok even with BC1 compression (it helps that unlike â€œobviously wrongâ€ rotation or scale, itâ€™s much harder to tell when your spherical harmonics coefficient is wrong ğŸ˜ƒ).")])]),t._v(" "),e("p",[t._v("æˆ‘è®¤ä¸ºâ€œä»¥æŸç§æ–¹å¼â€æ’åˆ— splat æ•°æ®ï¼Œç„¶åä¸ä»…é€šè¿‡å°†æ¯ä¸ª splat å•ç‹¬ç¼–ç ä¸ºæ›´å°‘é‡çš„ä½ï¼Œè€Œä¸”è¿˜â€œåœ¨é‚»å±…å†…â€ï¼ˆä¾‹å¦‚ä½¿ç”¨ BC7 æˆ– BC1ï¼‰æ¥å‹ç¼©å®ƒä»¬ï¼Œè¿™ä¸€æƒ³æ³•å¾ˆæœ‰è¶£ã€‚ ç‰¹åˆ«æ˜¯ï¼Œå³ä½¿ä½¿ç”¨ BC1 å‹ç¼©ï¼Œçƒè°å‡½æ•°æ•°æ®çœ‹èµ·æ¥ä¹Ÿç›¸å½“ä¸é”™ï¼ˆä¸â€œæ˜æ˜¾é”™è¯¯â€çš„æ—‹è½¬æˆ–ç¼©æ”¾ä¸åŒï¼Œå®ƒæœ‰åŠ©äºåˆ¤æ–­çƒè°å‡½æ•°ç³»æ•°ä½•æ—¶å‡ºé”™:)ï¼‰ã€‚")]),t._v(" "),e("blockquote",[e("p",[t._v("Thereâ€™s a bunch of small things I could try:")])]),t._v(" "),e("p",[t._v("æˆ‘å¯ä»¥å°è¯•å¾ˆå¤šå°äº‹æƒ…ï¼š")]),t._v(" "),e("blockquote",[e("ul",[e("li",[t._v("Splat reordering: reorder splats not only based on position, but also based on â€œsomething elseâ€. Try Hilbert curve instead of Morton. Try using not-fully-256 size chunks whenever the curve flips to the other side.")]),t._v(" "),e("li",[t._v("Color/Opacity encoding: maybe itâ€™s worth putting that into two separate textures, instead of trying to get BC7 to compress them both.")]),t._v(" "),e("li",[t._v("I do wonder how would reducing the texture resolution work, maybe for some components (spherical harmonics? color if opacity is separate?) you could use lower resolution texture, i.e. below 1 texel per splat.")])])]),t._v(" "),e("ul",[e("li",[t._v("Splat é‡æ–°æ’åºï¼šä¸ä»…æ ¹æ®ä½ç½®é‡æ–°æ’åº splatï¼Œè¿˜æ ¹æ®â€œå…¶ä»–å†…å®¹â€é‡æ–°æ’åºã€‚ å°è¯•å¸Œå°”ä¼¯ç‰¹æ›²çº¿è€Œä¸æ˜¯è«é¡¿æ›²çº¿ã€‚ æ¯å½“æ›²çº¿ç¿»è½¬åˆ°å¦ä¸€ä¾§æ—¶ï¼Œå°è¯•ä½¿ç”¨ä¸å®Œå…¨ 256 å¤§å°çš„å—ã€‚")]),t._v(" "),e("li",[t._v("é¢œè‰²/ä¸é€æ˜åº¦ç¼–ç ï¼šä¹Ÿè®¸å€¼å¾—å°†å…¶æ”¾å…¥ä¸¤ä¸ªå•ç‹¬çš„çº¹ç†ä¸­ï¼Œè€Œä¸æ˜¯å°è¯•è®© BC7 å‹ç¼©å®ƒä»¬ã€‚")]),t._v(" "),e("li",[t._v("æˆ‘ç¡®å®æƒ³çŸ¥é“å¦‚ä½•é™ä½çº¹ç†åˆ†è¾¨ç‡ï¼Œä¹Ÿè®¸å¯¹äºæŸäº›ç»„ä»¶ï¼ˆçƒé¢è°æ³¢ï¼Ÿé¢œè‰²ï¼Œå¦‚æœä¸é€æ˜åº¦æ˜¯ç‹¬ç«‹çš„ï¼Ÿï¼‰æ‚¨å¯ä»¥ä½¿ç”¨è¾ƒä½åˆ†è¾¨ç‡çš„çº¹ç†ï¼Œå³æ¯ä¸ªsplatä½äº1ä¸ªçº¹ç´ ã€‚")])]),t._v(" "),e("blockquote",[e("p",[t._v("And then of course there are larger questions, in a sense of whether this way looking at reducing data size is sensible at all. Maybe something along the lines of â€œ"),e("a",{attrs:{href:"https://research.nvidia.com/labs/rtr/neural_texture_compression/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Random-Access Neural Compression of Material Textures"),e("OutboundLink")],1),t._v("â€ (Vaidyanathan, Salvi, Wronski 2023) would work? If only I knew anything about this â€œneural/MLâ€ thing ğŸ˜ƒ")])]),t._v(" "),e("p",[t._v("å½“ç„¶ï¼Œè¿˜æœ‰æ›´å¤§çš„é—®é¢˜ï¼Œä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œè¿™ç§å‡å°‘æ•°æ®å¤§å°çš„æ–¹å¼æ˜¯å¦æ˜æ™ºã€‚ ä¹Ÿè®¸ç±»ä¼¼äºâ€œæè´¨çº¹ç†çš„éšæœºè®¿é—®ç¥ç»å‹ç¼©â€ï¼ˆVaidyanathanã€Salviã€Wronski 2023ï¼‰çš„ä¸œè¥¿ä¼šèµ·ä½œç”¨ï¼Ÿ å¦‚æœæˆ‘å¯¹â€œç¥ç»/æœºå™¨å­¦ä¹ â€è¿™ä¸ªä¸œè¥¿æœ‰æ‰€äº†è§£å°±å¥½äº†:)")]),t._v(" "),e("blockquote",[e("p",[t._v("All my code for the above is in this "),e("a",{attrs:{href:"https://github.com/aras-p/UnityGaussianSplatting/pull/3",target:"_blank",rel:"noopener noreferrer"}},[t._v("PR"),e("OutboundLink")],1),t._v(" on github (merged 2023 Sep).")])]),t._v(" "),e("p",[t._v("æˆ‘çš„ä¸Šè¿°æ‰€æœ‰ä»£ç éƒ½åœ¨ github ä¸Šçš„"),e("a",{attrs:{href:"https://github.com/aras-p/UnityGaussianSplatting/pull/3",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™ä¸ª PR"),e("OutboundLink")],1),t._v("ä¸­ã€‚")])])}),[],!1,null,null,null);a.default=n.exports}}]);