(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{516:function(t,s,n){t.exports=n.p+"assets/img/NewRegistry.d790dab9.png"},785:function(t,s,n){"use strict";n.r(s);var a=n(4),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("æ‰“å¼€"),a("a",{attrs:{href:"https://github.com/pion/ion/blob/65dbd12eaad0f0e0a019b4d8ee80742930bcdc28/pkg/node/islb/islb.go",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("pkg/node/islb/islb.go")]),a("OutboundLink")],1),t._v("æ¥çœ‹ä¸€çœ¼ï¼Œå‘ç°åªæœ‰ä¸€ä¸ª"),a("code",[t._v("Start")]),t._v("å’Œ"),a("code",[t._v("Stop")]),t._v("å‡½æ•°ï¼Œæ ¸å¿ƒä»£ç åº”è¯¥æ˜¯"),a("code",[t._v("Start")]),t._v("é‡Œçš„è¿™ä¸€æ®µã€‚")]),t._v(" "),a("p",[t._v("é¦–å…ˆæ˜¯è¿Redisï¼š")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("\ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redis "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewRedis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redis "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" errors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("New")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"new redis error"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("ç„¶ååˆåˆ›å»ºäº†ä¸€ä¸ªå…¨å±€çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼š")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//registry for node discovery.")]),t._v("\n\ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewRegistry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Global"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NatsConn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tlog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Errorf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%v"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" err\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("è¿™ä¸ª"),a("code",[t._v("NewRegistry")]),t._v("æ˜¯ä¸€ä¸ªè¿™æ ·çš„ä¸œè¥¿ï¼š\n"),a("img",{attrs:{src:n(516),alt:""}})]),t._v(" "),a("p",[t._v("çœ‹èµ·æ¥åƒæ˜¯è°ƒç”¨äº†ä¸€ä¸ª"),a("code",[t._v("registry")]),t._v("åŒ…çš„ä»€ä¹ˆä¸œè¥¿åˆ›å»ºäº†æ³¨å†Œä¸­å¿ƒï¼Œç„¶åç”¨"),a("code",[t._v("Listen")]),t._v("æŒ‡å®šäº†ä¸¤ä¸ªæ¶ˆæ¯å¤„ç†çš„å‡½æ•°ã€‚çœ‹çœ‹è¿™ä¸ª"),a("code",[t._v("registry")]),t._v("åŒ…æ˜¯ä»€ä¹ˆï¼š\n"),a("img",{attrs:{src:"i/nats-discovery.png",alt:""}})]),t._v(" "),a("p",[t._v("åŸæ¥å¦‚æ­¤ï¼Œæ˜¯ä¸€ä¸ªåŸºäºnatsæ¶ˆæ¯é˜Ÿåˆ—åšçš„æœåŠ¡æ³¨å†Œå™¨å•Šã€‚")]),t._v(" "),a("p",[t._v("é‚£è¿™ä¸ª"),a("code",[t._v("handleNodeAction")]),t._v("å’Œ"),a("code",[t._v("handleGetNodes")]),t._v("è‚¯å®šå°±æ˜¯æœåŠ¡æ³¨å†Œçš„ä¸»è¦é€»è¾‘äº†ã€‚çœ‹çœ‹ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"i/handleNodeAction.png",alt:""}}),t._v("\nå°±æ˜¯ä¸ªç®€å•çš„æŒ‰ç…§æŒ‡ä»¤å¢å‡èŠ‚ç‚¹çš„æ“ä½œã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"i/handleGetNodes.png",alt:""}}),t._v("\nè¿™å°±æ˜¯ä¸ªè¿”å›å­˜å‚¨çš„èŠ‚ç‚¹ä¿¡æ¯çš„æ“ä½œã€‚åœ¨"),a("code",[t._v("if service == proto.ServiceRTC")]),t._v("çš„é‡Œé¢åº”è¯¥æ˜¯æŸ¥è¯¢SFUèŠ‚ç‚¹çš„æ“ä½œï¼Œæ ¹æ®ä¸€ä¸ªå«"),a("code",[t._v("nid")]),t._v("çš„å˜é‡å’Œä¸€ä¸ªå«"),a("code",[t._v("sid")]),t._v("çš„å˜é‡è¿›è¡Œçš„æ“ä½œï¼Œè¿™ä¸ª"),a("code",[t._v("nid")]),t._v("è¿˜æœ‰å¯èƒ½æ˜¯"),a("code",[t._v("*")]),t._v("ï¼Ÿé‚£è¿™å¾ˆæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªæ ¹æ®èŠå¤©å®¤Sessionä»æ•°æ®åº“é‡ŒæŸ¥æ‰¾å¯¹åº”çš„è§†é¢‘æµåœ¨å“ªä¸ªSFUä¸Šçš„æ“ä½œã€‚ä½†æ˜¯è¿™æŸ¥æ‰¾çš„ç»“æœåˆæ²¡ç»™è¿”å›å›å»ï¼Œæœ€åä¹Ÿæœ‰åªæ˜¯æ ¹æ®æœåŠ¡åç§°è¿”å›äº†æ‰€æœ‰ç¬¦åˆè¦æ±‚çš„èŠ‚ç‚¹ï¼Œçœ‹è¿™æ ·å­æ‰€è°“è´Ÿè½½å‡è¡¡å¥½åƒéƒ½æ²¡å®Œå…¨å®ç°ï¼Œæˆ–è€…å¯èƒ½æ˜¯å‡†å¤‡åˆ äº†ã€‚")]),t._v(" "),a("p",[t._v("å›åˆ°"),a("code",[t._v("pkg/node/islb/islb.go")]),t._v("çš„ä»£ç é‡Œï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª"),a("code",[t._v("ServiceRegistrar")]),t._v("è¢«æ³¨å†Œåˆ°äº†grpcå’Œä¸€ä¸ª"),a("code",[t._v("reflection")]),t._v("åŒ…é‡Œé¢ï¼š")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("\ti"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("s "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newISLBServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tpb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("RegisterISLBServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ServiceRegistrar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Register reflection service on nats-rpc server.")]),t._v("\n\treflection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ServiceRegistrar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("nrpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("çœ‹è¿™ä¸ª"),a("code",[t._v("ServiceRegistrar")]),t._v("é•¿è¿™æ ·ï¼š\n"),a("img",{attrs:{src:"i/ServiceRegistrar.png",alt:""}}),t._v("\næ‰€ä»¥è¿™æ˜æ˜¾æ˜¯ä¸€ä¸ªæ„é€ grpcæœåŠ¡å™¨çš„æƒ¯ç”¨æ“ä½œã€‚")]),t._v(" "),a("p",[t._v("å†çœ‹è¿™ä¸ª"),a("code",[t._v("reflection")]),t._v("åŒ…æ˜¯å“ªæ¥çš„ï¼š\n"),a("img",{attrs:{src:"i/nats-grpc.png",alt:""}}),t._v("\nåŸæ¥æ˜¯ä¸€ä¸ªåŸºäºnatså®ç°çš„grpcï¼ionçœŸå°±æŠŠæ‰€æœ‰é€šä¿¡æ“ä½œéƒ½æ”¾è¿›natsé‡Œé¢å•Š")]),t._v(" "),a("p",[t._v("å†æ‰¾åˆ°è¿™ä¸ª"),a("code",[t._v("pb.RegisterISLBServer")]),t._v("çš„ä½ç½®çœ‹çœ‹protoæ–‡ä»¶ï¼š")]),t._v(" "),a("div",{staticClass:"language-proto line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('syntax = "proto3";\n\nimport "proto/ion/ion.proto";\n\noption go_package = "github.com/pion/ion/proto/islb";\n\npackage islb;\n\nservice ISLB {\n}\n\nmessage FindNodeRequest {\n    string sid = 1;\n    string nid = 2;\n    string service = 3;\n}\n\nmessage FindNodeReply {\n    repeated ion.Node nodes = 1;\n}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br")])]),a("p",[t._v("ğŸ˜‚å¤ªç®€å•äº†8")]),t._v(" "),a("p",[t._v("æ²¡æœ‰ä¸€ç‚¹å¤æ‚çš„åè®®åœ¨é‡Œé¢ï¼Œå°±åªæœ‰FindNodeç›¸å…³çš„ä¸¤ä¸ªæ“ä½œï¼Œè€Œä¸”"),a("code",[t._v("ISLB")]),t._v("æœåŠ¡å±…ç„¶æ˜¯ç©ºçš„ï¼Ÿ")]),t._v(" "),a("p",[t._v("åœ¨"),a("code",[t._v("newISLBServer")]),t._v("è¿™é‡Œé¢æœ‰ä¸€å¤§æ®µè¢«æ³¨é‡Šçš„ä»£ç ï¼š\n"),a("img",{attrs:{src:"i/PostISLBEvent.png",alt:""}}),t._v("\nä»è¿™ä¸ªæ³¨é‡Šçœ‹æ˜¯æ¥æ”¶æµä¿¡æ¯çš„å‡½æ•°ï¼Œè´Ÿè´£æ¥æ”¶è§†é¢‘æµçš„å»ºç«‹å’Œæ–­å¼€è¿‡ç¨‹ï¼Œå¹¶ä¸”æŠŠç°åœ¨æ‰€æœ‰çš„æµä¿¡æ¯å†™è¿›æ•°æ®åº“é‡Œã€‚è¿™åœ°æ–¹å’Œå‰é¢çš„"),a("code",[t._v("handleGetNodes")]),t._v("å¯¹åº”èµ·æ¥äº†ï¼Œåœ¨islbé‡ŒæŸ¥SFUèŠ‚ç‚¹çš„æµä¿¡æ¯å¯èƒ½æ˜¯ä¸€ä¸ªå°†è¦è¢«åˆ é™¤çš„åŠŸèƒ½ã€‚è¿™åŠŸèƒ½åº”è¯¥ç§»åˆ°åˆ«çš„åœ°æ–¹å»äº†å§ã€‚")]),t._v(" "),a("p",[t._v("å›åˆ°"),a("code",[t._v("pkg/node/islb/islb.go")]),t._v("çš„ä»£ç é‡Œï¼Œå¯ä»¥çœ‹åˆ°ä¸Šé¢é‚£äº›ä¸œè¥¿éƒ½æ‰“åŒ…è¿›äº†è¿™ä¸ª"),a("code",[t._v("Node")]),t._v("é‡Œé¢ï¼š")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("\tnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" discovery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tDC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("      conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Global"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" proto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ServiceISLB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tNID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("     i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tRPC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" discovery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RPC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tProtocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" discovery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NGRPC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\tAddr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("     conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Nats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//Params:   map[string]string{"username": "foo", "password": "bar"},')]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("æ²¡å•¥å¥½è¯´çš„")]),t._v(" "),a("p",[t._v("ç„¶åå¯åŠ¨è½®è¯¢ä¸ŠæŠ¥è‡ªèº«çŠ¶æ€å’Œç›‘æµ‹èŠ‚ç‚¹æ“ä½œè¯·æ±‚ï¼š")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\terr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("KeepAlive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tlog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Errorf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"islb.Node.KeepAlive: error => %v"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Watch ALL nodes.")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\terr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Watch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ServiceALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tlog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Errorf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Node.Watch(proto.ServiceALL) error %v"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("ä¹Ÿæ²¡å•¥å¥½è¯´çš„")]),t._v(" "),a("p",[t._v("æ‰€ä»¥ç»¼ä¸Šæ‰€è¿°ï¼Œislbå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹æ³¨å†Œä¸­å¿ƒï¼Œå¹¶æ²¡æœ‰æ‰€è°“çš„è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œå­˜å‚¨å’ŒæŸ¥è¯¢æµä¿¡æ¯çš„åŠŸèƒ½ä¸çŸ¥é“è¢«ç§»åˆ°å“ªå»äº†ã€‚æ¨æµ‹è¿™ä¸ªæ¨¡å—åé¢åº”è¯¥ä¼šæ”¹ä¸ªåå­—ï¼Œæ¯”å¦‚æ”¹æˆâ€œRegistryâ€å•¥çš„ï¼Œæ›´ç¬¦åˆå®ƒç°åœ¨çš„åŠŸèƒ½ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);